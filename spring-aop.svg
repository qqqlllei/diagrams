<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1101px" height="1811px" viewBox="-0.5 -0.5 1101 1811" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-08-20T08:39:39.660Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.6.2 Chrome/83.0.4103.122 Electron/9.2.0 Safari/537.36&quot; etag=&quot;gGBwylFSOvChXsDVRTkU&quot; version=&quot;13.6.2&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;12Eg5AseuB3jBfSngtw3&quot; name=&quot;第 1 页&quot;&gt;7R1bc5u4+tcws33YDHfEIzh2253uaaftnLP7dAYbOaYl4MW4SfbXH0lIIKTPDptA7Lin02ltSUjiu98kG87s9v5tlWw3v5cpzg3bTO8N59qwbccMfPIfbXloWpBvNw03VZY2TVbX8CX7G/NGk7fusxTvegPrsszrbNtvXJVFgVd1ry2pqvKuP2xd5v1Vt8kN1hq+rJJcb/1PltYb/hZ20LW/w9nNRqxs+WHTc5uIwfxNdpskLe+kJmduOLOqLOvm0+39DOcUeAIuzXOLA73txipc1EMe+ONf3+b//vz14yz5tCp/+NffPnx/+ytHxo8k3/MX5putHwQEqnJfpJhOYhlOfLfJavxlm6xo7x3BOWlbl0XNMWc55HuSZzcF+bIiO8MVbahWvN+mw7M8n5V5WbH5naWJHeyT9l1dld+x1GNiZCJEen7gqs4ITiI+cV3SZTf1bc53pcOCg4c+ie+lJg6bt7i8xXX1QIbw3l8t1+GY4qRqi+93HeIty+SNGxnrSJBrwsntpp2/wwj5wJHyTxAUPo4hnBKS5V/Lqt6UN2WR5POuNe5waJJv3ZgPJYUkA+E3XNcPHEvJvi4HAnhX7qsVPvICDmfapLrB9ZFxbjOOvstRdFU4T+rsR589Rwe7A0DdT24p2RXL3ZZBxLz8JtecF8kyx9FuS4TrbxGhi09VeU/g6+cEmfGyIp9u6Cdj7hnhwogjY+7Sf9HcmPtG7BgRMubIiAIjcuiYeGYgkw02jWiREPIjn1FEnyXDkGPE13xY6LEuz4g8dfnP+CYj0iKp6BrhNRkhLUae8Q00i4qirAmllEV0R8hWnWJW4aQmgmbu0P0gm21ywWYKjNgy4pjNTRvfF7s6KeqsmyzGSfGp3NVkphXe7eg0gRGSl3bp8tE1fblumgV76Rl76ZnYIjJCBjMyII6WZD5pCrIuedhn40wjDI15KCDjMshEdLexSRvpUy6ZdNttJ8brssK9XbM5CYRCDicK23ZbZKoF2w1ioJgJfDUbIF3WblPu8/TL92wr7VLdwVMUR18TrNdre7WCNEHqL33PP6gJhMLJ8bruy61O8/hjqQknVNREoKsJx4O0hDmVkhCK6tUqCXegkvDPSkm4GtQlRtEk5Dor0llSpFma1DhKf2REbuwgQYqo8IwDwX0+5VkUMrHpUwmCwqR9+gQsd5ulKaMXzcwb2yBTOc21B3KaNxmjBa+c0byBjCbe60w4zdPAPlC920RiOJZ5mP1OrrMAJ8mZioE8wKMBGQiFk3GQpaHydXGQP5CDgrNiIF+DOrVhF8mKMMkD54bPZKUMkyHvcL7F1RXlGN5FB+9+eSOxEzNFY6Kplt08zE4NuAX5mA7jM7cGZWMD+9SWjOfcRCYGJpmSmKbI5y4DaaQLI2pkc8OV2dxkTDh/AjdrXKiyN1phmL2XyHM985h+HIeFA4WFEcDCFsDC/mQcPCBmdNYcHAzkYHRWHKxbHjIHc/XH1Vq8z/KUcPCS/q/0jcvFzFe0jYiGCpqFaFdk0hlo15zxsMziF8mjXo9HfcgjtF+UR6H41WviUTSQR4XkOxMmRRrYP+N1TriCrNznQ85sV+T1JF+w48shrBfS2BdRe675qcyKerWvoZjbQXY8GhQiS1kGYrE4shHkQ4N11SzHlHrBoe41dbWdiA6PRuBiJlNiy4gsjWQvUFYEfnBqWeGfQjTg+6z+gz5+5fFvf0o91/d8ZvblQXwpyPtKD9Gvf8p93WPsm3ju6WIoHCiGnPPKXug5I4n/ns5UPLz6fJbiHnAvKzgSd9lXff5CoL3s6fzlTpbCs4DoLCjfVfnKHB0U6UJdqJI2BtJLMvRzC3zs/H5b4d2OjO10hSZvZflNdcWcZTGuyWfcPj6BUMZW6uEAoqDQD5zkeBCyJaKjnP6PiMjru1yhqZNQG/R/ERFtAUGTRq839IIoiv4RolUq6WWLWBUHC6uJKbjseH+7zeHZyFeasNI8ckFRvQlk+2POPjDDJmJ5QcQojnZ5zFhprJ0mnxYL/7/JgTGLKGosG2KszAbaWoQ0j6fDeB4QZEixch/2kN3VvmXDxtfCTGI8Sh6h0GGxDsTQQNqpFNAH83nEznUjqbMaz4I1VeE+HV8CbhbIl/Zk0UxLj4UI0mOw50gbAS+S6aSgiCAIpS6EImQvHX+0vKetgN8ykafB3/Ih+HtTgV93czn4f8fEIk2bTPh4SDgXyFtWcHVy2OvZT0H6awKtCwS6d3KQA2kwCeSfcb2viqy4uUDYh9apYa9nUGTYf91U5d1Fgr4F6elADyTdiVVE/CdiCTVmYRONosVSETOYmAE3ARISjNagq+uvEF6uR7N03AGqFrR0JsOBHtlkRmvIbFXuJF42DmCl+7JYAIqBuaMw/1mwAGjhF8WBDUdzVL/3onEAaOOXxQEUD2lqi5sPiP69aBxAankqHNSb39K37/7amh8+VPluXhX/DT6KGPPrzRpYk2UNbB4VePzMw3llL8W+e2zVBqGbDywiFzUl9yyMRUNUPosmmqL0/3DFaq9Onj7DAl1R0IuBgSWxYDpxhXdRW6O0WzR1SgNq3WVB7VKtGc66MvbmIAM9j+CxLqc1dHpl+smT0ymTVRCCde+TFRNaHhAXB6sJ3ckC47YeADpKGuMrgBGyX+NhSMktW97QQhQHTYYhPUwEVuL+8gZizkNiZHw8nnkOyvJCV0MlqPCdyTCpR5+kCtHd101SE6xG223+cB74ebFEhOW7Op+ByLGCybCjx6feE3OmTPcrViTf6V9+Ks1jube4l18S5Tk9XbsSSAX0quR7Eo6NWUqPxmU8nZnrao/5WT+e6PO4EcELfSEf6lDp7+uNr2mGvN+VLMjUA+rRNgAxPvnoMbaD+eSr26RebfDuaIb0YIpTzNLNeyCr/HQcw3UqAzAMS5Bp8B64Z4F3IK7H7W96qr+HAf+vfSk6ft0xmRqRAQQ0911na7MLK140RB8/iTay06U6jrQ1C4pmBfsE0MrRzj4ai7LACs55k8b5B/U4RFN9l1W96YB+ly8sYH9GIpm27EScMwWUjAt5/JMVCuqmHCS1+/7RTpyIRpLMD5iUcKSu1kFrvEx2+DqaseISXbXwmnVoHrWs6hknJV9dKanlQMe7XraWVBcnhG9xZyX2apzb8/C6oicIdRnS2cl3OsanaG0MF2ZCXON1ss9rpULpaFGb7urzE/7M1ScL+03ZwPviR7nidXUq8X7dVDhJP5D+XDooIR/xb4PxMTukJLFDU75D6JKuyIi4YYYD9A0vpRUO/mS2NgKIHLS1JzO1HT0LQyivK+NvEBk2keiIYuksUPSi7mpoDcTSGO4qGJ8WpVnnEKBuY9JnEqAWZsPjAerzOsUq9v0Ma9UKBlmrK3p+HPfuunmK1XpeV6CMFWhULVPLB2SyB8YZJzNOXcA4PQH/P4MnByeNnPPiSShpFFDDi5YisHMEkSusNmZy0UuGLGEANXEms3/CrEnlLhRjMfJZepcVjYfAGYU2/bSlbPuVwXGWJ7sd9yriqIlBKUclQm4Yxosu5HWTZ0tgP1rZPPQWRwxQ/R3I/DYbI5+nVd6qfdznaWy61ow5SUNWl2xceueWL8VmWBFVrOTt5iIst2AzH9n8kXlUiH5Lv48Gz8tz5ZA/KCjoQu7+ZL6cq0eUX5lEHXz1oHdeElVPanJnl7sYUZpsWb0vuwXv4YpRuSwr9SA/YsJkJg6s2EdT4vrjHh2DWJFl1HS1N9Jx8dL637K3HYnAbyRFcoQvHTu9AzVc/LXnX9R5DyYu+ku20815lUEnV5rqhSaFEA0PH+jwEVcG/gSCKPCt0wsiPfHYmOdRuWUW+i9v6NEuYawLNkh4r06rXXznXVIQ4CnXNyo67cg9jkBZCl/yyF2OjEh7KbADJz9p9Ei2VRasDKctStHuXwTmaVeHWKR/eK4DF997RqD0HToq9xOQPQIKJyYjejh8oRP9KbSvnPBAp4lVANf1wBA7M78IuipwklgFZ9SLCVOMdRuAFqaA6pbhMMVkB0ZdPUHCTA+cftlvt4RBqSZ7T6XkCm/rsqJFbNcPRXKbrdpWXs4xyTGjEcrZ3KmEsi3OYD0mlNtc+/jo00P/fdN8tkmyQjpvfkJUDqh36JAWHETsKKjUDpW5CDIrIV60vVGqH2CVoWFT8wdUtyPpyqT6ebgmdfg7K40BqqjkmhkliAMFaIipFjf3fnvMGzoahTk4WN3EcTdSIddjddT9m6oevy+Bp1chL46H5vp70qqsAQeWPyhStu3GgUXkKxKec1uCwmG+G/gITMI5lut4rqEViKzZHy0or2jFCRlRO0aCAJkK/sTFGJF7kAn1+LF+eF+QxbNRlpiebacQyvxra2GaR1A2CvyVnxixHEeHv/WieVLgCgXgMPmlICCw1ZqZADhZ/qII0BNX7DD57rIA79tnR/lPrphmxUk0uNPmKJT6n9mjZoTUwpQk+Xt+6ujxislJdJIL2fmQTpqMMqALB5qYtc8zVCFoy7RRP7AcXg0V9o0tzcD5Pz0IevAG0sMYbh9ID9DlB829E04/HdorFbxlZswsIXY/VNeq3iH2HT/AhKNeFKhVS57Edxz5xz40F9ETBVyPOYiiLHl871A3jbob5tRK0ast/fElnNLrtU8eXQN+UyIQwVy+Lyi4OwYetaCbCZ5zAMNu1hhXcMKohErXPVpmEUXSXTKqkAZ8yyNni9tbELm3e5hYhiWBlAxtKERGwFeILSnRqR/BVjOeQ15YUmHs3GXcpI6JfLN6dSjq7YcHby3syp7VtJpc1XItVOS8/9sPbTL20N2owIpsVzELozCYRBGvRpEvqrkIiYlUTgOuunURwGdPiqiRr91vlbI+6Rdfnfn/AA==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="0" width="1100" height="1810" rx="22" ry="22" fill="#b0e3e6" stroke="#0e8088" pointer-events="all"/><path d="M 215 140 L 215 183.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 188.88 L 211.5 181.88 L 215 183.63 L 218.5 181.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="40" width="350" height="100" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 348px; height: 1px; padding-top: 47px; margin-left: 42px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">                         @EnableAspectJAutoProxy<br />基于注解开启aop功能引入AspectJAutoProxyRegistrar来注册AnnotationAwareAspectJAutoProxyCreator。该类是InstantiationAwareBeanPostProcessor的子类，在创建bean的时候都会调用postProcessBeforeInstantiation方法，进而触发shouldSkip的调用</div></div></div></foreignObject><text x="42" y="59" fill="#000000" font-family="Helvetica" font-size="12px">@EnableAspectJAutoProxy...</text></switch></g><path d="M 215 240 L 215 343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 348.88 L 211.5 341.88 L 215 343.63 L 218.5 341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="190" width="350" height="50" rx="7.5" ry="7.5" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 215px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">shouldSkip<br />findCandidateAdvisors<br />获取所有advisors</div></div></div></foreignObject><text x="215" y="219" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">shouldSkip...</text></switch></g><path d="M 215 1190 L 215 1263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 1268.88 L 211.5 1261.88 L 215 1263.63 L 218.5 1261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="300" width="350" height="890" rx="10.5" ry="10.5" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 307px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AnnotationAwareAspectJAutoProxyCreator<br />findCandidateAdvisors</div></div></div></foreignObject><text x="215" y="319" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AnnotationAwareAspectJAutoProxyCreator...</text></switch></g><path d="M 215 410 L 215 430 L 215 420 L 215 433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 438.88 L 211.5 431.88 L 215 433.63 L 218.5 431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="60" y="350" width="310" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 380px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans()<br />从beanFactory里获取所有Advisor的bean放到集合中返回</div></div></div></foreignObject><text x="215" y="384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(...</text></switch></g><path d="M 215 500 L 215 520 L 215 517 L 215 530.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 535.88 L 211.5 528.88 L 215 530.63 L 218.5 528.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="55" y="440" width="320" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 470px; margin-left: 56px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors()<br />从beanFactory里获取所有被@Aspect标记的bean</div></div></div></foreignObject><text x="215" y="474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisor...</text></switch></g><path d="M 215 597 L 215 663.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 668.88 L 211.5 661.88 L 215 663.63 L 218.5 661.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="55" y="537" width="320" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 567px; margin-left: 56px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ReflectiveAspectJAdvisorFactory.getAdvisors<br />获取所有非@Pointcut注解标记的方法，遍历方法集合，调用getAdvisor返回advisor对象</div></div></div></foreignObject><text x="215" y="571" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ReflectiveAspectJAdvisorFactory.getAdvisors...</text></switch></g><path d="M 215 1060 L 215 1093.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 1098.88 L 211.5 1091.88 L 215 1093.63 L 218.5 1091.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="57.5" y="650" width="315" height="410" rx="6.3" ry="6.3" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 313px; height: 1px; padding-top: 657px; margin-left: 60px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">getAdvisor</div></div></div></foreignObject><text x="60" y="669" fill="#000000" font-family="Helvetica" font-size="12px">getAdvisor</text></switch></g><rect x="80" y="670" width="270" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 700px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取方法上注解AspectJAnnotation，创建AspectJExpressionPointcut对象，设置expression</div></div></div></foreignObject><text x="215" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取方法上注解AspectJAnnotation，创建AspectJExpressionPointcut对象，设置exp...</text></switch></g><rect x="80" y="740" width="270" height="290" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 747px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据AspectJExpressionPointcut对象创建InstantiationModelAwarePointcutAdvisorImpl对象并返回，AdvisorImpl的构造函数最终会执行ReflectiveAspectJAdvisorFactory.getAdvice方法，该方法会根据注解的不同实例化不同的Advice对象<div><br /></div></div></div></div></foreignObject><text x="215" y="759" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据AspectJExpressionPointcut对象创建InstantiationModelAw...</text></switch></g><rect x="180" y="855" width="160" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 868px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJAroundAdvice</div></div></div></foreignObject><text x="260" y="871" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AspectJAroundAdvice</text></switch></g><rect x="180" y="887.5" width="160" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 900px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJMethodBeforeAdvice</div></div></div></foreignObject><text x="260" y="904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AspectJMethodBeforeAdvice</text></switch></g><rect x="180" y="925" width="160" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 938px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJAfterAdvice</div></div></div></foreignObject><text x="260" y="941" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AspectJAfterAdvice</text></switch></g><rect x="180" y="961" width="160" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 974px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJAfterReturningAdvice</div></div></div></foreignObject><text x="260" y="977" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AspectJAfterReturningAdvice</text></switch></g><rect x="180" y="995" width="160" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 1008px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJAfterThrowingAdvice</div></div></div></foreignObject><text x="260" y="1011" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AspectJAfterThrowingAdvice</text></switch></g><rect x="90" y="855" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 868px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">环绕通知</div></div></div></foreignObject><text x="125" y="871" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">环绕通知</text></switch></g><rect x="90" y="887.5" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 900px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">前置通知</div></div></div></foreignObject><text x="125" y="904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">前置通知</text></switch></g><rect x="90" y="925" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 938px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">后置通知</div></div></div></foreignObject><text x="125" y="941" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">后置通知</text></switch></g><rect x="90" y="961" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 974px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">返回通知</div></div></div></foreignObject><text x="125" y="977" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">返回通知</text></switch></g><rect x="90" y="995" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 1008px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">异常通知</div></div></div></foreignObject><text x="125" y="1011" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">异常通知</text></switch></g><path d="M 215 1730 L 215 1750 L 790 1750 L 790 1726.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 1721.12 L 793.5 1728.12 L 790 1726.37 L 786.5 1728.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1270" width="350" height="460" rx="10.5" ry="10.5" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 1277px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">上一步完成了所有advisor的初始化<br />调用getAdvicesAndAdvisorsForBean方法，返回作用域当前bean的advisor</div></div></div></foreignObject><text x="215" y="1289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">上一步完成了所有advisor的初始化...</text></switch></g><rect x="55" y="1340" width="320" height="380" rx="9.6" ry="9.6" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 1347px; margin-left: 56px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">getAdvicesAndAdvisorsForBean</div></div></div></foreignObject><text x="215" y="1359" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">getAdvicesAndAdvisorsForBean</text></switch></g><rect x="80" y="1364" width="270" height="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 1379px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">findCandidateAdvisors()返回所有advisor</div></div></div></foreignObject><text x="215" y="1383" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">findCandidateAdvisors()返回所有advisor</text></switch></g><rect x="80" y="1410" width="270" height="170" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 1417px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">findAdvisorsThatCanApply</div></div></div></foreignObject><text x="215" y="1429" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">findAdvisorsThatCanApply</text></switch></g><rect x="90" y="1442.5" width="250" height="47.5" rx="7.13" ry="7.13" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1466px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">IntroductionAdvisor类型的Advisor调用canApply方法后直接返回true加入到返回集合中</div></div></div></foreignObject><text x="215" y="1470" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">IntroductionAdvisor类型的Advisor调用canApply方法后直接返回true加入到返回集合中</text></switch></g><rect x="90" y="1512.5" width="250" height="47.5" rx="7.13" ry="7.13" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1520px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AspectJExpressionPointcut.matches方法会实例化PointcutExpressionImpl对象</div></div></div></foreignObject><text x="92" y="1532" fill="#000000" font-family="Helvetica" font-size="12px">AspectJExpressionPointcut.matches方法会实例化Pointcut...</text></switch></g><rect x="530" y="10" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 20px; margin-left: 531px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 20px"><b>AOP</b></font></div></div></div></foreignObject><text x="550" y="24" fill="#000000" font-family="Helvetica" font-size="13px" text-anchor="middle">AOP</text></switch></g><rect x="55" y="1100" width="320" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 1130px; margin-left: 56px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">返回的advisors存入缓存，下次直接从缓存获取advisors</div></div></div></foreignObject><text x="215" y="1134" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">返回的advisors存入缓存，下次直接从缓存获取advisors</text></switch></g><rect x="80" y="1600" width="270" height="70" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 1607px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">extendAdvisors<br />在集合头部添加DefaultPointcutAdvisor对象，作用是将MethodInvocation存入ThreadLocal里，后续的advice可以直接从ThreadLocal里获取</div></div></div></foreignObject><text x="215" y="1619" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">extendAdvisors...</text></switch></g><rect x="80" y="1680" width="270" height="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 1695px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sortAdvisors排序</div></div></div></foreignObject><text x="215" y="1699" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">sortAdvisors排序</text></switch></g><path d="M 790 1400 L 790 1357.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 1352.12 L 793.5 1359.12 L 790 1357.37 L 786.5 1359.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="530" y="1400" width="520" height="320" rx="9.6" ry="9.6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 518px; height: 1px; padding-top: 1407px; margin-left: 532px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 17px"><b>createProxy</b></font></div></div></div></foreignObject><text x="532" y="1419" fill="#000000" font-family="Helvetica" font-size="12px">createProxy</text></switch></g><path d="M 790 1502.5 L 790 1522.5 L 790 1511.5 L 790 1525.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 1530.38 L 786.5 1523.38 L 790 1525.13 L 793.5 1523.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="570" y="1442.5" width="440" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 1473px; margin-left: 571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">确认动态代理方式<br />如果设置了proxyTargetClass为true，则使用cglib方式创建代理对象，如果没有设置，查看代理对象是否实现了接口，如果实现了使用jdk方式创建代理对象</div></div></div></foreignObject><text x="790" y="1476" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">确认动态代理方式&#xa;如果设置了proxyTargetClass为true，则使用cglib方式创建代理对象，如果没有设置，查看代理对象是否实现了接口，如果实现了使用jdk方式创建代理对象</text></switch></g><path d="M 790 1591.5 L 790 1633.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 1638.88 L 786.5 1631.88 L 790 1633.63 L 793.5 1631.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="570" y="1531.5" width="440" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 1562px; margin-left: 571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DefaultAdvisorAdapterRegistry.wrap<br />类型转换，返回类型必须都是Advisor，事务相关会有不是Advisor类型的，会构建一个DefaultPointcutAdvisor对象返回。</div></div></div></foreignObject><text x="790" y="1565" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DefaultAdvisorAdapterRegistry.wrap...</text></switch></g><rect x="570" y="1640" width="440" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 1670px; margin-left: 571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">createAopProxy().getProxy<br />aopProxy都是InvocationHandler的实现类，在调用getProxy的时候传入方法中，及当调用方法时，会执行aopProxy的invoke方法</div></div></div></foreignObject><text x="790" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">createAopProxy().getProxy...</text></switch></g><path d="M 790 961 L 790 941 L 790 942.5 L 790 928.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 923.62 L 793.5 930.62 L 790 928.87 L 786.5 930.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="530" y="961" width="520" height="390" rx="7.8" ry="7.8" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 518px; height: 1px; padding-top: 968px; margin-left: 532px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 17px"><b>invoke</b></font></div></div></div></foreignObject><text x="532" y="980" fill="#000000" font-family="Helvetica" font-size="12px">invoke</text></switch></g><rect x="570" y="986" width="440" height="340" rx="13.6" ry="13.6" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 993px; margin-left: 571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AdvisedSupport.getInterceptorsAndDynamicInterceptionAdvice</div></div></div></foreignObject><text x="790" y="1005" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AdvisedSupport.getInterceptorsAndDynamicInterceptionAdvice</text></switch></g><rect x="580" y="1018.5" width="420" height="257.5" rx="18.03" ry="18.03" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 1026px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DefaultAdvisorChainFactory.getInterceptorsAndDynamicInterceptionAdvice</div></div></div></foreignObject><text x="790" y="1038" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DefaultAdvisorChainFactory.getInterceptorsAndDynamicInterceptionAdvice</text></switch></g><rect x="590" y="1056" width="400" height="120" rx="3.6" ry="3.6" fill="#647687" stroke="#314354" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 398px; height: 1px; padding-top: 1063px; margin-left: 592px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PointcutAdvisor类型advisor获取MethodMatcher调用matches查看是否匹配，如果匹配，调用DefaultAdvisorAdapterRegistry.getInterceptors方法，<br />该方法会将类型为AdvisorAdapter的advisor转换为MethodInterceptor类型<div><br /></div><div><br /></div></div></div></div></foreignObject><text x="592" y="1075" fill="#ffffff" font-family="Helvetica" font-size="12px">PointcutAdvisor类型advisor获取MethodMatcher调用matches查看是否匹配，如果匹配，调用DefaultAdvisorAdapterReg...</text></switch></g><rect x="600" y="1106" width="170" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1121px; margin-left: 601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MethodBeforeAdviceAdapter</div></div></div></foreignObject><text x="685" y="1125" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">MethodBeforeAdviceAdapter</text></switch></g><rect x="705" y="1141" width="170" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1156px; margin-left: 706px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">AfterReturningAdviceAdapter</div></div></div></foreignObject><text x="790" y="1160" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">AfterReturningAdviceAdapter</text></switch></g><rect x="810" y="1106" width="170" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1121px; margin-left: 811px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ThrowsAdviceAdapter</div></div></div></foreignObject><text x="895" y="1125" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">ThrowsAdviceAdapter</text></switch></g><rect x="590" y="1186" width="400" height="30" rx="0.9" ry="0.9" fill="#647687" stroke="#314354" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 1201px; margin-left: 591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">IntroductionAdvisor类型处理，同PointcutAdvisor类型类似</div></div></div></foreignObject><text x="790" y="1205" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">IntroductionAdvisor类型处理，同PointcutAdvisor类型类似</text></switch></g><rect x="590" y="1226" width="400" height="40" rx="1.2" ry="1.2" fill="#647687" stroke="#314354" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 1246px; margin-left: 591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">其他类型的直接调用getInterceptors转换</div></div></div></foreignObject><text x="790" y="1250" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">其他类型的直接调用getInterceptors转换</text></switch></g><rect x="580" y="1282" width="420" height="34" rx="5.1" ry="5.1" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 1299px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">结果存入methodCache下次根据key直接获取集合</div></div></div></foreignObject><text x="790" y="1303" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">结果存入methodCache下次根据key直接获取集合</text></switch></g><rect x="530" y="812.5" width="520" height="110" rx="7.7" ry="7.7" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 820px; margin-left: 531px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">ReflectiveMethodInvocation.proceed()</div></div></div></foreignObject><text x="790" y="838" fill="#000000" font-family="Helvetica" font-size="18px" text-anchor="middle" font-weight="bold">ReflectiveMethodInvocation.proceed()</text></switch></g><rect x="550" y="850" width="480" height="57.5" rx="8.63" ry="8.63" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 478px; height: 1px; padding-top: 879px; margin-left: 551px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">循环调用MethodInterceptor方法，并将ReflectiveMethodInvocation传入方法，这样就构成了一个循环调用的逻辑，根据不同的advice实现，来达到对方法不同的拦截位置</div></div></div></foreignObject><text x="790" y="882" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">循环调用MethodInterceptor方法，并将ReflectiveMethodInvocation传入方法，这样就构成了一个循环调用的逻辑，根据不同的advice实现，来达到对方法不同的拦截位置</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>