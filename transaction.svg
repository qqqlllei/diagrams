<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2101px" height="1691px" viewBox="-0.5 -0.5 2101 1691" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-08-25T06:05:08.656Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.6.2 Chrome/83.0.4103.122 Electron/9.2.0 Safari/537.36&quot; etag=&quot;fLU2fjfZukabkw9bMrdd&quot; version=&quot;13.6.2&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;Y8oYmp99auzHq-wwUD1S&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f5f5f5-1-b3b3b3-1-s-0"><stop offset="0%" style="stop-color:#f5f5f5"/><stop offset="100%" style="stop-color:#b3b3b3"/></linearGradient></defs><g><rect x="0" y="0" width="2100" height="1690" rx="33.8" ry="33.8" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 2098px; height: 1px; padding-top: 7px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 19px"><b>Transaction</b></font></div></div></div></foreignObject><text x="1050" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Transaction</text></switch></g><rect x="615" y="35" width="270" height="60" rx="9" ry="9" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 65px; margin-left: 616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TransactionInterceptor<br />基于aop，代理对象进行方法拦截invokeWithinTransaction</div></div></div></foreignObject><text x="750" y="69" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TransactionInterceptor...</text></switch></g><rect x="20" y="170" width="2060" height="1510" rx="45.3" ry="45.3" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 2058px; height: 1px; padding-top: 177px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><font style="font-size: 12px">invokeWithinTransaction</font></div></div></div></foreignObject><text x="1050" y="193" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">invokeWithinTransaction</text></switch></g><path d="M 563 270 L 563 290 L 563 280 L 563 293.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 563 298.88 L 559.5 291.88 L 563 293.63 L 566.5 291.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="440" y="230" width="246" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 250px; margin-left: 441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 12px">getTransactionAttributeSource<br />AnnotationTransactionAttributeSource</font></div></div></div></foreignObject><text x="563" y="255" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">getTransactionAttributeSource...</text></switch></g><path d="M 563 340 L 563 360 L 563 350 L 563 363.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 563 368.88 L 559.5 361.88 L 563 363.63 L 566.5 361.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="440" y="300" width="246" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 320px; margin-left: 441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 12px">getTransactionAttribute<br />获取事务属性信息<br /></font></div></div></div></foreignObject><text x="563" y="325" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">getTransactionAttribute...</text></switch></g><rect x="440" y="370" width="246" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 390px; margin-left: 441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">determineTransactionManager<br />获取TransactionManager</div></div></div></foreignObject><text x="563" y="394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">determineTransactionManager...</text></switch></g><rect x="40" y="470" width="2020" height="1200" rx="24" ry="24" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 2018px; height: 1px; padding-top: 477px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">createTransactionIfNecessary</div></div></div></foreignObject><text x="1050" y="489" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">createTransactionIfNecessary</text></switch></g><rect x="70" y="520" width="1970" height="1140" rx="22.8" ry="22.8" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1968px; height: 1px; padding-top: 527px; margin-left: 71px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">getTransaction</div></div></div></foreignObject><text x="1055" y="539" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">getTransaction</text></switch></g><path d="M 915 610 L 915 630 L 915 629 L 915 642.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 915 647.88 L 911.5 640.88 L 915 642.63 L 918.5 640.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="645" y="550" width="540" height="60" rx="9" ry="9" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 538px; height: 1px; padding-top: 557px; margin-left: 646px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGetTransaction<br />创建DataSourceTransactionObject对象，从TM里获取ConnectionHolder<br />ConnectionHolder是JDBC的connection包装类</div></div></div></foreignObject><text x="915" y="569" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGetTransaction...</text></switch></g><path d="M 680 689 L 635 689 L 635 763.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 635 768.88 L 631.5 761.88 L 635 763.63 L 638.5 761.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1150 689 L 1505 689 L 1505 763.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1505 768.88 L 1501.5 761.88 L 1505 763.63 L 1508.5 761.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 915 649 L 1150 689 L 915 729 L 680 689 Z" fill="#a0522d" stroke="#6d1f00" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 689px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">判断当前是否已经有事务存在<br />holder是否存在，且事务属性transactionActive是否为true</div></div></div></foreignObject><text x="915" y="693" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">判断当前是否已经有事务存在&#xa;holder是否存在，且事务属性transactionActive是否为true</text></switch></g><path d="M 480 800 L 405 800 L 405 893.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 405 898.88 L 401.5 891.88 L 405 893.63 L 408.5 891.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="480" y="770" width="310" height="60" rx="9" ry="9" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 777px; margin-left: 481px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果当前事物传播属性是MANDATORY<br />直接抛出异常，该属性的逻辑是支持当前事务，如果不存在抛出异常</div></div></div></foreignObject><text x="635" y="789" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">如果当前事物传播属性是MANDATORY...</text></switch></g><rect x="1000" y="770" width="1010" height="860" rx="17.2" ry="17.2" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1008px; height: 1px; padding-top: 777px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleExistingTransaction</div></div></div></foreignObject><text x="1505" y="789" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">handleExistingTransaction</text></switch></g><rect x="590" y="709" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 719px; margin-left: 591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">否</div></div></div></foreignObject><text x="610" y="723" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">否</text></switch></g><rect x="1220" y="709" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 719px; margin-left: 1221px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">是</div></div></div></foreignObject><text x="1240" y="723" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">是</text></switch></g><path d="M 405 950 L 405 1013.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 405 1018.88 L 401.5 1011.88 L 405 1013.63 L 408.5 1011.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="280" y="900" width="250" height="50" rx="7.5" ry="7.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 907px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">REQUIRED||REQUIRES_NEW||NESTED<br />传播类型的事务执行suspend方法，传入参数为null，及挂起一个空事务</div></div></div></foreignObject><text x="405" y="919" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">REQUIRED||REQUIRES_NEW||NESTED...</text></switch></g><path d="M 405 1070 L 405 1173.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 405 1178.88 L 401.5 1171.88 L 405 1173.63 L 408.5 1171.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="280" y="1020" width="250" height="50" rx="7.5" ry="7.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1027px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">newTransactionStatus<br />DefaultTransactionStatus</div></div></div></foreignObject><text x="405" y="1039" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">newTransactionStatus...</text></switch></g><path d="M 405 1280 L 405 1315 L 405.1 1315 L 405.1 1343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 405.1 1348.88 L 401.6 1341.88 L 405.1 1343.63 L 408.6 1341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="97.5" y="1180" width="615" height="100" rx="5" ry="5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 613px; height: 1px; padding-top: 1187px; margin-left: 100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">doBegin<br />1：如果connectionHolder不存在||synchronizedWithTransaction为true则从dataSource获取connection，且创建ConnectionHolder对象<br />2：设置synchronizedWithTransaction为true设置previousIsolationLevel<br />3：设置autoCommit属性为false，设置holder的transactionActive为true<br />4：如果是新的holder绑定当前dataSource和connectionHodler存入属性为resources的ThreadLocal中。<div><br /></div><div><br /></div></div></div></div></foreignObject><text x="100" y="1199" fill="#ffffff" font-family="Helvetica" font-size="12px" font-weight="bold">doBegin...</text></switch></g><rect x="1050" y="810" width="140" height="50" rx="7.5" ry="7.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 835px; margin-left: 1051px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">never<br />传播类型，直接抛出异常</div></div></div></foreignObject><text x="1120" y="839" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">never...</text></switch></g><path d="M 1295 860 L 1297.1 860 L 1297.07 884.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1297.06 889.75 L 1293.57 882.75 L 1297.07 884.5 L 1300.57 882.76 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1260" y="810" width="140" height="50" rx="7.5" ry="7.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 835px; margin-left: 1261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">not_supporte</div></div></div></foreignObject><text x="1330" y="839" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">not_supporte</text></switch></g><path d="M 1530 860 L 1527.9 860 L 1527.92 883.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1527.92 888.88 L 1524.41 881.88 L 1527.92 883.63 L 1531.41 881.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1460" y="810" width="140" height="50" rx="7.5" ry="7.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 835px; margin-left: 1461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">requires_new</div></div></div></foreignObject><text x="1530" y="839" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">requires_new</text></switch></g><path d="M 1720 860 L 1720 1050 L 1719.9 1050 L 1719.9 1233.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1719.9 1238.88 L 1716.4 1231.88 L 1719.9 1233.63 L 1723.4 1231.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1650" y="810" width="140" height="50" rx="7.5" ry="7.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 835px; margin-left: 1651px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">nested</div></div></div></foreignObject><text x="1720" y="839" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">nested</text></switch></g><path d="M 1920 860 L 1920 1050 L 1919.9 1050 L 1919.92 1230.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1919.92 1235.88 L 1916.42 1228.88 L 1919.92 1230.63 L 1923.42 1228.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1850" y="810" width="140" height="50" rx="7.5" ry="7.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 835px; margin-left: 1851px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">required</div></div></div></foreignObject><text x="1920" y="839" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">required</text></switch></g><path d="M 1515 1180 L 1515 1210 L 1514.8 1210 L 1514.78 1235.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1514.77 1240.88 L 1511.28 1233.88 L 1514.78 1235.63 L 1518.28 1233.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1345 1180 L 1345 1210 L 1344.7 1210 L 1344.68 1231.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1344.68 1236.88 L 1341.19 1229.88 L 1344.68 1231.63 L 1348.19 1229.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1260" y="890" width="340" height="290" rx="5.8" ry="5.8" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 897px; margin-left: 1261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">suspend挂起当前事务<div><br /></div></div></div></div></foreignObject><text x="1430" y="909" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">suspend挂起当前事务&#xa;</text></switch></g><rect x="1270" y="940" width="320" height="80" rx="4.8" ry="4.8" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 318px; height: 1px; padding-top: 947px; margin-left: 1272px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doSuspend<br />移除transaction对象中的connectionHolder对象<br />解除TransactionSynchronizationManager绑定的资源，即当前线程绑定的connectionHolder对象并返回holder对象。<div><br /></div></div></div></div></foreignObject><text x="1272" y="959" fill="#000000" font-family="Helvetica" font-size="12px">doSuspend...</text></switch></g><rect x="1270" y="1040" width="320" height="110" rx="6.6" ry="6.6" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 318px; height: 1px; padding-top: 1047px; margin-left: 1272px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">清除TransactionSynchronizationManager中部分属性信息如currentTransactionName<br />currentTransactionReadOnly<br />currentTransactionIsolationLevel<br />actualTransactionActive<br />然后构建SuspendedResourcesHolder对象，将返回的holder、name、readOnly等信息传入该对象，并返回</div></div></div></foreignObject><text x="1272" y="1059" fill="#000000" font-family="Helvetica" font-size="12px">清除TransactionSynchronizationManager中部分属性信息如currentTransactionNa...</text></switch></g><rect x="1260" y="1240" width="730" height="250" rx="10" ry="10" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 728px; height: 1px; padding-top: 1247px; margin-left: 1261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">newTransactionStatus<br />根据传入参数构建DefaultTransactionStatus对象</div></div></div></foreignObject><text x="1625" y="1259" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">newTransactionStatus...</text></switch></g><rect x="1700" y="1290" width="250" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1297px; margin-left: 1702px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">not_supporte<br />transaction传入为null，即以非事物方式运行<br />newTransaction为false<br />有挂起对象<br /><br /></div></div></div></foreignObject><text x="1702" y="1309" fill="#000000" font-family="Helvetica" font-size="12px">not_supporte...</text></switch></g><path d="M 1300 1325 L 1100 1325 L 1100 1210 L 718.87 1210" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 713.62 1210 L 720.62 1206.5 L 718.87 1210 L 720.62 1213.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1300" y="1290" width="250" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1297px; margin-left: 1302px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">requires_new<br />transaction传入当前事务对象<br />newTransaction为true<br />有挂起对象<br /></div></div></div></foreignObject><text x="1302" y="1309" fill="#000000" font-family="Helvetica" font-size="12px">requires_new...</text></switch></g><rect x="1300" y="1380" width="250" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1387px; margin-left: 1302px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">nested<br />transaction传入当前事务对象<br />newTransaction为false<br />无挂起对象</div></div></div></foreignObject><text x="1302" y="1399" fill="#000000" font-family="Helvetica" font-size="12px">nested...</text></switch></g><rect x="1700" y="1380" width="250" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1387px; margin-left: 1702px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">required<br />transaction传入当前事务对象<br />newTransaction为false<br />无挂起对象</div></div></div></foreignObject><text x="1702" y="1399" fill="#000000" font-family="Helvetica" font-size="12px">required...</text></switch></g><rect x="98.75" y="1350" width="612.5" height="140" rx="7" ry="7" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 611px; height: 1px; padding-top: 1357px; margin-left: 101px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">prepareSynchronization<br />1：设置事务激活状态<br />2：设置事务隔离级别<br />3：设置事务只读属性<br />4：设置当前事务名称<br />5：激活当前线程的事务同步。事务管理器在事务开始时调用。与事务回调有关。<br />TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {}<br />自定义回调方法会在事务执行前后调用相关逻辑</div></div></div></foreignObject><text x="101" y="1369" fill="#ffffff" font-family="Helvetica" font-size="12px" font-weight="bold">prepareSynchronization...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>