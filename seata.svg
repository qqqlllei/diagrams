<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2961px" height="4677px" viewBox="-0.5 -0.5 2961 4677" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-09-01T07:14:37.568Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.6.2 Chrome/83.0.4103.122 Electron/9.2.0 Safari/537.36&quot; etag=&quot;NGumi_moFddOYex9UN_4&quot; version=&quot;13.6.2&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;ft8qHBVG7MIYmR1m9sZa&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e6d0de-1-d5739d-1-s-0"><stop offset="0%" style="stop-color:#e6d0de"/><stop offset="100%" style="stop-color:#d5739d"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-d5e8d4-1-97d077-1-s-0"><stop offset="0%" style="stop-color:#d5e8d4"/><stop offset="100%" style="stop-color:#97d077"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffcd28-1-ffa500-1-s-0"><stop offset="0%" style="stop-color:#ffcd28"/><stop offset="100%" style="stop-color:#ffa500"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#fff2cc"/><stop offset="100%" style="stop-color:#ffd966"/></linearGradient></defs><g><rect x="0" y="0" width="2960" height="4676" rx="59.2" ry="59.2" fill="#e3c800" stroke="#b09500" pointer-events="all"/><path d="M 675 166 L 675 227.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 675 232.38 L 671.5 225.38 L 675 227.13 L 678.5 225.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="520" y="76" width="310" height="90" rx="2.7" ry="2.7" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 83px; margin-left: 522px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">GlobalTransactionScanner<br />initClient初始化客户端</div></div></div></foreignObject><text x="522" y="95" fill="#ffffff" font-family="Helvetica" font-size="12px">GlobalTransactionScanner...</text></switch></g><rect x="720" y="126" width="90" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 141px; margin-left: 721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RMClient.init</div></div></div></foreignObject><text x="765" y="145" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">RMClient.init</text></switch></g><rect x="720" y="86" width="90" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 101px; margin-left: 721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TMClient.init</div></div></div></foreignObject><text x="765" y="105" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">TMClient.init</text></switch></g><path d="M 675 323.5 L 675 399.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 675 404.88 L 671.5 397.88 L 675 399.63 L 678.5 397.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="520" y="233.5" width="310" height="90" rx="2.7" ry="2.7" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 241px; margin-left: 522px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">对带有GlobalTransactional、GlobalLock注解的bean添加增强。增强类为GlobalTransactionalInterceptor，控制着全局事务，一旦带有注解的方便执行，则会进入GlobalTransactionalInterceptor的invoke方法。</div></div></div></foreignObject><text x="522" y="253" fill="#ffffff" font-family="Helvetica" font-size="12px">对带有GlobalTransactional、GlobalLock注解的bean添加增强。增强类为GlobalTransactiona...</text></switch></g><rect x="215" y="406" width="920" height="410" rx="8.2" ry="8.2" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 918px; height: 1px; padding-top: 413px; margin-left: 217px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleGlobalTransaction<br />1：getTransactionInfo获取事务信息，隔离级别，回滚规则等信息。<br />2：getCurrentOrCreate：获取全局事务，如果不存在就创建一个，如果是新创建的，则role为launcher及发起者。<br />3：根据隔离级别决定是否挂起当前事务。<br />4：beginTransaction，开始全局事务<br />5：执行自己的业务逻辑<br />6：根据是否发生异常决定是commit还是rollback<div><br /></div><div><br /></div></div></div></div></foreignObject><text x="217" y="425" fill="#ffffff" font-family="Helvetica" font-size="12px">handleGlobalTransaction...</text></switch></g><rect x="462" y="526" width="426" height="115" rx="3.45" ry="3.45" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 424px; height: 1px; padding-top: 533px; margin-left: 464px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">beginTransaction<br />1：triggerBeforeBegin前置钩子函数<br />2：DefaultTransactionManager.begin，构建GlobalBeginRequest请求对象，同步调用server端，server会返回GlobalBeginResponse对象。接受server返回的xid，设置status为Begin。绑定xid到当前线程。<br />3：triggerAfterBegin后置钩子函数</div></div></div></foreignObject><text x="464" y="545" fill="#000000" font-family="Helvetica" font-size="12px">beginTransaction...</text></switch></g><rect x="460" y="676" width="428" height="90" rx="2.7" ry="2.7" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 426px; height: 1px; padding-top: 683px; margin-left: 462px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">执行自己的业务的时候，就会调用远程服务了，远程调用会传递xid给全局事务参与者，在执行数据库相关操作的时候会被DataSourceProxy、ConnectionProxy、PreparedStatementProxy做相应拦截做特殊处理<div><br /></div></div></div></div></foreignObject><text x="462" y="695" fill="#000000" font-family="Helvetica" font-size="12px">执行自己的业务的时候，就会调用远程服务了，远程调用会传递xid给全局事务参与者，在执行数据库相关操作的时候会被DataSourceProxy、ConnectionProxy、PreparedStatementProxy做相应拦截做特殊处理&#xa;</text></switch></g><rect x="114" y="1076" width="1166" height="1030" rx="51.5" ry="51.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><path d="M 457.5 1146 L 457.5 1189.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 457.5 1194.88 L 454 1187.88 L 457.5 1189.63 L 461 1187.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="317.5" y="1096" width="280" height="50" rx="7.5" ry="7.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 1103px; margin-left: 319px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DataSourceProxy<br />调用getConnection返回ConnectionProxy</div></div></div></foreignObject><text x="458" y="1115" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DataSourceProxy...</text></switch></g><path d="M 457.5 1296 L 457.5 1339.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 457.5 1344.88 L 454 1337.88 L 457.5 1339.63 L 461 1337.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="270" y="1196" width="375" height="100" rx="3" ry="3" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 373px; height: 1px; padding-top: 1246px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ConnectionProxy<br />prepareStatement方法创建PreparedStatementProxy对象，执行execute会调用ExecuteTemplate的execute方法，该方法会根据具体执行的sql语句构建不同的executor对象，最终执行executer的execute方法。</div></div></div></foreignObject><text x="458" y="1250" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ConnectionProxy...</text></switch></g><rect x="740" y="1146" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1166px; margin-left: 741px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">InsertExecutor</div></div></div></foreignObject><text x="815" y="1170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">InsertExecutor</text></switch></g><rect x="920" y="1146" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1166px; margin-left: 921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">UpdateExecutor</div></div></div></foreignObject><text x="995" y="1170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">UpdateExecutor</text></switch></g><rect x="740" y="1206" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1226px; margin-left: 741px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DeleteExecutor</div></div></div></foreignObject><text x="815" y="1230" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DeleteExecutor</text></switch></g><rect x="920" y="1206" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1226px; margin-left: 921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SelectForUpdateExecutor</div></div></div></foreignObject><text x="995" y="1230" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">SelectForUpdateExecutor</text></switch></g><rect x="1091" y="1146" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1166px; margin-left: 1092px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PlainExecutor</div></div></div></foreignObject><text x="1166" y="1170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PlainExecutor</text></switch></g><rect x="270" y="1346" width="375" height="240" rx="7.2" ry="7.2" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 373px; height: 1px; padding-top: 1353px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">executeAutoCommitFalse</div></div></div></foreignObject><text x="458" y="1365" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">executeAutoCommitFalse</text></switch></g><rect x="366.25" y="1376" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 1391px; margin-left: 367px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">beforeImage</div></div></div></foreignObject><text x="458" y="1395" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">beforeImage</text></switch></g><rect x="366.25" y="1436" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 1451px; margin-left: 367px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">执行目标sql语句</div></div></div></foreignObject><text x="458" y="1455" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">执行目标sql语句</text></switch></g><rect x="366.25" y="1486" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 1501px; margin-left: 367px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">afterImage</div></div></div></foreignObject><text x="458" y="1505" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">afterImage</text></switch></g><rect x="366.25" y="1536" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 1551px; margin-left: 367px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">prepareUndoLog</div></div></div></foreignObject><text x="458" y="1555" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">prepareUndoLog</text></switch></g><rect x="140" y="1616" width="887.5" height="440" rx="13.2" ry="13.2" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 886px; height: 1px; padding-top: 1623px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doCommit</div></div></div></foreignObject><text x="584" y="1635" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">doCommit</text></switch></g><rect x="363.75" y="1656" width="440" height="390" rx="19.5" ry="19.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 1663px; margin-left: 365px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">processGlobalTransactionCommit</div></div></div></foreignObject><text x="584" y="1675" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">processGlobalTransactionCommit</text></switch></g><rect x="454.69" y="1696" width="258.12" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 1703px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">register<br />发送BranchRegisterRequest请求<br />返回branchId存储在ConnectionContext对象中</div></div></div></foreignObject><text x="584" y="1715" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">register...</text></switch></g><rect x="454.69" y="1786" width="258.12" height="40" rx="6" ry="6" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 1793px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">flushUndoLogs<br />undoLogs入库</div></div></div></foreignObject><text x="584" y="1805" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">flushUndoLogs...</text></switch></g><rect x="454.69" y="1846" width="258.12" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 1853px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">targetConnection.commit</div></div></div></foreignObject><text x="584" y="1865" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">targetConnection.commit</text></switch></g><rect x="454.69" y="1896" width="258.12" height="60" rx="9" ry="9" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 1903px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">report<br />发送BranchReportRequest请求<br />上报分支事务第一阶段执行成功。</div></div></div></foreignObject><text x="584" y="1915" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">report...</text></switch></g><rect x="454.69" y="1976" width="258.12" height="60" rx="9" ry="9" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 1983px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">reset<br />xid,branchId,lockKeysBuffer,<br />sqlUndoItemsBuffer属性置空</div></div></div></foreignObject><text x="584" y="1995" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">reset...</text></switch></g><rect x="0" y="2286" width="2890" height="2370" rx="47.4" ry="47.4" fill="#647687" stroke="#314354" pointer-events="all"/><path d="M 345.81 2478.99 L 345.8 2591 L 435 2591 L 435 2695.9" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 435 2702.65 L 430.5 2693.65 L 435 2695.9 L 439.5 2693.65 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 217.5 2476 L 217.5 3651 L 579.9 3651" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.65 3651 L 577.65 3655.5 L 579.9 3651 L 577.65 3646.5 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="100" y="2346" width="470" height="130" rx="15.6" ry="15.6" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 2411px; margin-left: 101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TM</div></div></div></foreignObject><text x="335" y="2415" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TM</text></switch></g><rect x="1950" y="2346" width="900" height="2300" rx="45" ry="45" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 898px; height: 1px; padding-top: 3496px; margin-left: 1951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TC</div></div></div></foreignObject><text x="2400" y="3500" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TC</text></switch></g><path d="M 435 2906 L 435 3186 L 519.9 3186" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 526.65 3186 L 517.65 3190.5 L 519.9 3186 L 517.65 3181.5 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="230" y="2706" width="410" height="200" rx="12" ry="12" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 408px; height: 1px; padding-top: 2713px; margin-left: 232px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="232" y="2725" fill="#000000" font-family="Helvetica" font-size="12px">RM</text></switch></g><path d="M 270 2781 C 270 2772.72 287.91 2766 310 2766 C 320.61 2766 330.78 2767.58 338.28 2770.39 C 345.79 2773.21 350 2777.02 350 2781 L 350 2811 C 350 2819.28 332.09 2826 310 2826 C 287.91 2826 270 2819.28 270 2811 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 350 2781 C 350 2789.28 332.09 2796 310 2796 C 287.91 2796 270 2789.28 270 2781" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 2796px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="310" y="2800" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><rect x="335" y="2566" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 2576px; margin-left: 336px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="373" y="2580" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><rect x="590" y="3516" width="350" height="180" rx="27" ry="27" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 3606px; margin-left: 591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="765" y="3610" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RM</text></switch></g><rect x="140" y="2966" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 2976px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="178" y="2980" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><path d="M 790 3141 L 1941.7 3141.79" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 1948.45 3141.8 L 1939.44 3146.29 L 1941.7 3141.79 L 1939.45 3137.29 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="530" y="3096" width="260" height="180" rx="27" ry="27" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 3186px; margin-left: 531px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="660" y="3190" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RM</text></switch></g><rect x="439" y="2956" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 2966px; margin-left: 440px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="477" y="2970" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><path d="M 548.75 3221 C 548.75 3212.72 566.66 3206 588.75 3206 C 599.36 3206 609.53 3207.58 617.03 3210.39 C 624.54 3213.21 628.75 3217.02 628.75 3221 L 628.75 3251 C 628.75 3259.28 610.84 3266 588.75 3266 C 566.66 3266 548.75 3259.28 548.75 3251 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 628.75 3221 C 628.75 3229.28 610.84 3236 588.75 3236 C 566.66 3236 548.75 3229.28 548.75 3221" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 3236px; margin-left: 550px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="589" y="3240" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><path d="M 610 3641 C 610 3632.72 627.91 3626 650 3626 C 660.61 3626 670.78 3627.58 678.28 3630.39 C 685.79 3633.21 690 3637.02 690 3641 L 690 3671 C 690 3679.28 672.09 3686 650 3686 C 627.91 3686 610 3679.28 610 3671 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 690 3641 C 690 3649.28 672.09 3656 650 3656 C 627.91 3656 610 3649.28 610 3641" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 3656px; margin-left: 611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="650" y="3660" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><rect x="680" y="2716" width="92.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 91px; height: 1px; padding-top: 2723px; margin-left: 682px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister</div></div></div></foreignObject><text x="682" y="2735" fill="#000000" font-family="Helvetica" font-size="12px">branchRegister</text></switch></g><path d="M 500 2796 L 358.24 2796" fill="none" stroke="#ffff00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 352.24 2796 L 360.24 2792 L 358.24 2796 L 360.24 2800 Z" fill="#ffff00" stroke="#ffff00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="500" y="2776" width="118" height="40" rx="6" ry="6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 116px; height: 1px; padding-top: 2783px; margin-left: 502px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">存储undoLog到数据库，执行目标sql到库</div></div></div></foreignObject><text x="502" y="2795" fill="#000000" font-family="Helvetica" font-size="12px">存储undoLog到数据库，执行目标sql到库</text></switch></g><path d="M 931.88 3076 L 931.9 2421 L 553.1 2421" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 546.35 2421 L 555.35 2416.5 L 553.1 2421 L 555.35 2425.5 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="803.75" y="3076" width="256.25" height="50" rx="7.5" ry="7.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 254px; height: 1px; padding-top: 3101px; margin-left: 805px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister超时或者有RuntimeException，整体不一致，TM需要执行rollback逻辑</div></div></div></foreignObject><text x="932" y="3105" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">branchRegister超时或者有RuntimeException，整体不一致，TM需要执行rollback逻辑</text></switch></g><rect x="410" y="2406" width="133" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 131px; height: 1px; padding-top: 2413px; margin-left: 412px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">catch到异常，发送GlobalRollbackRequest请求。</div></div></div></foreignObject><text x="412" y="2425" fill="#000000" font-family="Helvetica" font-size="12px">catch到异常，发送GlobalRollbackReq...</text></switch></g><path d="M 460 2866 L 310 2866 L 310 2836.1" fill="none" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 310 2829.35 L 314.5 2838.35 L 310 2836.1 L 305.5 2838.35 Z" fill="#ffff00" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="460" y="2846" width="168" height="40" rx="6" ry="6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 166px; height: 1px; padding-top: 2853px; margin-left: 462px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">客户端执行undo操作，将数据还原为全局事务之前的状态。</div></div></div></foreignObject><text x="462" y="2865" fill="#000000" font-family="Helvetica" font-size="12px">客户端执行undo操作，将数据还原为全局事务之前的状态。</text></switch></g><rect x="2025" y="2366" width="680" height="1370" rx="6.8" ry="6.8" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 678px; height: 1px; padding-top: 2373px; margin-left: 2026px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DefaultCoordinator</div></div></div></foreignObject><text x="2365" y="2385" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DefaultCoordinator</text></switch></g><rect x="2075" y="2446" width="610" height="210" rx="31.5" ry="31.5" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 2453px; margin-left: 2076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalBegin</div></div></div></foreignObject><text x="2380" y="2465" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalBegin</text></switch></g><rect x="2095" y="2476" width="570" height="160" rx="11.2" ry="11.2" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 2483px; margin-left: 2097px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DefaultCore.begin<br /><ol><li>GlobalSession.createGlobalSession创建全局事务session</li><li>添加session生命周期监听器，类型为SessionManager的监听器，如果使用的存储时DB,则监听器为DataBaseSessionManager。</li><li>GlobalSession执行begin，开启全局事务。设置status为begin，设置开始时间属性，调用生命周期监听器的onBegin方法即此时会执行DataBaseSessinoManage的insertGlobalTransactionDO方法，将globalSession存储到DB中。</li><li>发送全局事务开始事件GlobalTransactionEvent</li><li>返回全局事务的xid到TM</li></ol></div></div></div></foreignObject><text x="2097" y="2495" fill="#000000" font-family="Helvetica" font-size="12px">DefaultCore.begin...</text></switch></g><rect x="2075" y="2731" width="610" height="210" rx="31.5" ry="31.5" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 2738px; margin-left: 2076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doBranchRegister</div></div></div></foreignObject><text x="2380" y="2750" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doBranchRegister</text></switch></g><rect x="2095" y="2766" width="570" height="160" rx="11.2" ry="11.2" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 2773px; margin-left: 2097px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister<br /><ol><li>获取根据xId获取GlobalSession</li><li>检查GlobalSession的状态</li><li>添加生命周期监听器</li><li>创建branchSession，设置xid，transactionId，branchId，branchType，resourceId，lockKeys</li><li>branchSessionLock，分支加锁，行级锁。假锁成功才会继续执行。</li><li>globalSession.addBranch,分支事务落库，设置branchSession状态为registered，添加branchSession到属性集合branchSessions中。</li><li>返回branchSession的branchId。</li></ol></div></div></div></foreignObject><text x="2097" y="2785" fill="#000000" font-family="Helvetica" font-size="12px">branchRegister...</text></switch></g><rect x="2075" y="3026" width="610" height="160" rx="24" ry="24" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 3033px; margin-left: 2076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doBranchReport(默认不发送该类型消息)</div></div></div></foreignObject><text x="2380" y="3045" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doBranchReport(默认不发送该类型消息)</text></switch></g><rect x="2095" y="3056" width="570" height="110" rx="7.7" ry="7.7" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 3063px; margin-left: 2097px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchReport<br /><ol><li>获取globalSession，且globalSession包含branchSession信息。</li><li>根据分支branchId从globalSession中获取branchSession</li><li>添加生命周期监听器</li><li>更新branchSession状态为PhaseOne_Done,库中状态同步更新。</li></ol></div></div></div></foreignObject><text x="2097" y="3075" fill="#000000" font-family="Helvetica" font-size="12px">branchReport...</text></switch></g><rect x="2075" y="3256" width="610" height="180" rx="27" ry="27" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 3263px; margin-left: 2076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalCommit</div></div></div></foreignObject><text x="2380" y="3275" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalCommit</text></switch></g><rect x="2095" y="3286" width="570" height="120" rx="8.4" ry="8.4" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 3293px; margin-left: 2097px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">commit<br /><ol><li>根据xid获取globalSession</li><li>添加生命周期监听器</li><li>设置globalSession的active属性为false，释放所有branchSession的锁</li><li>更改globalSession的状态为committing</li><li>如果是AT模式异步提交全局事务</li><li>返回全局事务提交状态</li></ol></div></div></div></foreignObject><text x="2097" y="3305" fill="#000000" font-family="Helvetica" font-size="12px">commit...</text></switch></g><path d="M 2075 3601 L 1200 3601 L 1200 2866 L 638.1 2866" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 631.35 2866 L 640.35 2861.5 L 638.1 2866 L 640.35 2870.5 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2075" y="3496" width="610" height="210" rx="31.5" ry="31.5" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 3503px; margin-left: 2076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalRollback</div></div></div></foreignObject><text x="2380" y="3515" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalRollback</text></switch></g><rect x="2095" y="3526" width="570" height="150" rx="10.5" ry="10.5" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 3533px; margin-left: 2097px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">rollback<br /><ol><li>根据xid获取globalSession</li><li>添加生命周期监听器</li><li>设置globalSession的active属性为false<br /></li><li>设置globalSession的状态为rollbacking</li><li>发送branchRollbackRequest</li><li>根据RM返回phaseTwo_Rollbacked 状态，服务端执行removeBranch</li><li>根据branchSession删除DB中branch记录，删除lock记录，删除内存中globalSession的branchSession</li></ol></div></div></div></foreignObject><text x="2097" y="3545" fill="#000000" font-family="Helvetica" font-size="12px">rollback...</text></switch></g><path d="M 570 2411 L 2380 2411 L 2380 2435.9" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2380 2442.65 L 2375.5 2433.65 L 2380 2435.9 L 2384.5 2433.65 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 640 2756 L 1358 2756 L 1358 2783.5 L 2064.9 2783.5" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2071.65 2783.5 L 2062.65 2788 L 2064.9 2783.5 L 2062.65 2779 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 2073 2846 L 1345.5 2846 L 1345.5 2796 L 628.1 2796" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 621.35 2796 L 630.35 2791.5 L 628.1 2796 L 630.35 2800.5 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 509.75 2466 L 509.8 2526 L 1270 2526 L 1270 3548.5 L 2064.9 3548.5" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 2071.65 3548.5 L 2062.65 3553 L 2064.9 3548.5 L 2062.65 3544 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 586 2886 L 586 2926 L 1120 2926 L 1120 3653.5 L 2064.9 3653.5" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 2071.65 3653.5 L 2062.65 3658 L 2064.9 3653.5 L 2062.65 3649 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1188.5" cy="2387.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2388px; margin-left: 1171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">1</div></div></div></foreignObject><text x="1189" y="2396" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">1</text></switch></g><ellipse cx="1359.5" cy="2464.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2465px; margin-left: 1342px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">2</div></div></div></foreignObject><text x="1360" y="2473" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">2</text></switch></g><ellipse cx="458.5" cy="2633.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2634px; margin-left: 441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">3</div></div></div></foreignObject><text x="459" y="2642" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">3</text></switch></g><ellipse cx="968.5" cy="2654.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2655px; margin-left: 951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">8</div></div></div></foreignObject><text x="969" y="2663" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">8</text></switch></g><ellipse cx="1298.5" cy="2637.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2638px; margin-left: 1281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">9</div></div></div></foreignObject><text x="1299" y="2646" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">9</text></switch></g><ellipse cx="1118.5" cy="2731" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2731px; margin-left: 1101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">4</div></div></div></foreignObject><text x="1119" y="2739" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">4</text></switch></g><ellipse cx="1128.5" cy="2807.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2808px; margin-left: 1111px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">5</div></div></div></foreignObject><text x="1129" y="2816" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">5</text></switch></g><ellipse cx="1198.5" cy="2984.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2985px; margin-left: 1181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">10</div></div></div></foreignObject><text x="1199" y="2992" fill="#CC0000" font-family="Helvetica" font-size="25px" text-anchor="middle">10</text></switch></g><ellipse cx="473.19" cy="3037.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 3038px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">6</div></div></div></foreignObject><text x="473" y="3046" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">6</text></switch></g><ellipse cx="931.5" cy="3167.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 3168px; margin-left: 914px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">7</div></div></div></foreignObject><text x="932" y="3176" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">7</text></switch></g><ellipse cx="1148.5" cy="3346" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 3346px; margin-left: 1131px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">11</div></div></div></foreignObject><text x="1149" y="3354" fill="#CC0000" font-family="Helvetica" font-size="25px" text-anchor="middle">11</text></switch></g><path d="M 2075 2498.5 L 1322.5 2498.5 L 1322.5 2460 L 581.98 2460.01" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 575.23 2460.01 L 584.23 2455.51 L 581.98 2460.01 L 584.23 2464.51 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="610" y="2496" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 635.25 2515.66 C 637.36 2514.47 639.45 2514.07 641.53 2514.09 C 649.9 2514.42 654.02 2521.64 653.35 2526.55 L 645.27 2526.55 L 655.03 2537.53 L 664.79 2526.55 L 658.25 2526.55 C 658.53 2516.57 650.49 2509.76 641.77 2509.49 C 638.64 2509.33 634.98 2510.31 631.98 2512.06 Z M 617.68 2525.5 L 624.19 2525.5 C 624.28 2533.56 629.17 2538.41 633.83 2540.48 C 639.73 2543.35 645.99 2542.2 650.47 2539.56 L 647.17 2535.86 C 645.94 2536.64 644.3 2537.17 642.19 2537.42 C 634.14 2537.85 628.92 2531.86 628.99 2525.5 L 637.09 2525.5 L 627.37 2514.08 Z M 641.33 2556 C 623.65 2556 610 2541.65 610 2527.16 C 610 2508.84 624.03 2496 641.55 2496 C 659.93 2496 672.5 2511.02 672.5 2525.37 C 672.5 2544.2 657.1 2556 641.33 2556 Z" fill="#ffff00" stroke="none" pointer-events="all"/><rect x="2023.13" y="3836" width="683.75" height="780" rx="13.68" ry="13.68" fill="#ffcccc" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 682px; height: 1px; padding-top: 3843px; margin-left: 2025px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">定时JOB</div></div></div></foreignObject><text x="2025" y="3868" fill="#000000" font-family="Helvetica" font-size="25px">定时JOB</text></switch></g><path d="M 2617.5 3941 L 2617.5 3936 L 2720 3936 L 2720 3601 L 2695.1 3601" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2688.35 3601 L 2697.35 3596.5 L 2695.1 3601 L 2697.35 3605.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2112.5" y="3886" width="505" height="110" rx="7.7" ry="7.7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 3893px; margin-left: 2115px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleRetryRollbacking--定时重拾回滚任务<br /><ol><li>获取状态为RollbackRetrying、Rollbacking、TimeoutRollbacking、TimeoutRollbackRetrying的所有globalSession</li><li>检查globalSession的状态，如果是rollbacking且还没有重试超时，跳过</li><li>检查是否重试超时，如果超时删除globalSession，默认一直重试</li><li>调用doGlobalRollback</li></ol></div></div></div></foreignObject><text x="2115" y="3905" fill="#000000" font-family="Helvetica" font-size="12px">handleRetryRollbacking--定时重拾回滚任务...</text></switch></g><rect x="2630" y="3866" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2655.25 3885.66 C 2657.36 3884.47 2659.45 3884.07 2661.53 3884.09 C 2669.9 3884.42 2674.02 3891.64 2673.35 3896.55 L 2665.27 3896.55 L 2675.03 3907.53 L 2684.79 3896.55 L 2678.25 3896.55 C 2678.53 3886.57 2670.49 3879.76 2661.77 3879.49 C 2658.64 3879.33 2654.98 3880.31 2651.98 3882.06 Z M 2637.68 3895.5 L 2644.19 3895.5 C 2644.28 3903.56 2649.17 3908.41 2653.83 3910.48 C 2659.73 3913.35 2665.99 3912.2 2670.47 3909.56 L 2667.17 3905.86 C 2665.94 3906.64 2664.3 3907.17 2662.19 3907.42 C 2654.14 3907.85 2648.92 3901.86 2648.99 3895.5 L 2657.09 3895.5 L 2647.37 3884.08 Z M 2661.33 3926 C 2643.65 3926 2630 3911.65 2630 3897.16 C 2630 3878.84 2644.03 3866 2661.55 3866 C 2679.93 3866 2692.5 3881.02 2692.5 3895.37 C 2692.5 3914.2 2677.1 3926 2661.33 3926 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 2617.51 4076 L 2750 4076 L 2750 3346 L 2695.1 3346" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2688.35 3346 L 2697.35 3341.5 L 2695.1 3346 L 2697.35 3350.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2112.51" y="4026" width="505" height="100" rx="7" ry="7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 4033px; margin-left: 2115px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleRetryCommitting--定时重拾提交任务<br /><ol><li>获取状态为CommitRetrying的所有globalSession</li><li>检擦是否重拾超时，如果超时删除globalSession</li><li>调用doGlobalCommit</li></ol></div></div></div></foreignObject><text x="2115" y="4045" fill="#000000" font-family="Helvetica" font-size="12px">handleRetryCommitting--定时重拾提交任务...</text></switch></g><rect x="2630" y="4006" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2655.25 4025.66 C 2657.36 4024.47 2659.45 4024.07 2661.53 4024.09 C 2669.9 4024.42 2674.02 4031.64 2673.35 4036.55 L 2665.27 4036.55 L 2675.03 4047.53 L 2684.79 4036.55 L 2678.25 4036.55 C 2678.53 4026.57 2670.49 4019.76 2661.77 4019.49 C 2658.64 4019.33 2654.98 4020.31 2651.98 4022.06 Z M 2637.68 4035.5 L 2644.19 4035.5 C 2644.28 4043.56 2649.17 4048.41 2653.83 4050.48 C 2659.73 4053.35 2665.99 4052.2 2670.47 4049.56 L 2667.17 4045.86 C 2665.94 4046.64 2664.3 4047.17 2662.19 4047.42 C 2654.14 4047.85 2648.92 4041.86 2648.99 4035.5 L 2657.09 4035.5 L 2647.37 4024.08 Z M 2661.33 4066 C 2643.65 4066 2630 4051.65 2630 4037.16 C 2630 4018.84 2644.03 4006 2661.55 4006 C 2679.93 4006 2692.5 4021.02 2692.5 4035.37 C 2692.5 4054.2 2677.1 4066 2661.33 4066 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 2617.51 4206 L 2780 4206 L 2780 3301 L 2695.1 3301" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2688.35 3301 L 2697.35 3296.5 L 2695.1 3301 L 2697.35 3305.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2112.51" y="4156" width="505" height="100" rx="7" ry="7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 4163px; margin-left: 2115px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleAsyncCommitting--定时异步提交任务，AT模式的事务<br /><ol><li>获取状态为AsyncCommitting的所有globalSession</li><li>调用doGlobalCommit</li></ol></div></div></div></foreignObject><text x="2115" y="4175" fill="#000000" font-family="Helvetica" font-size="12px">handleAsyncCommitting--定时异步提交任务，AT模式的事务...</text></switch></g><rect x="2630" y="4136" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2655.25 4155.66 C 2657.36 4154.47 2659.45 4154.07 2661.53 4154.09 C 2669.9 4154.42 2674.02 4161.64 2673.35 4166.55 L 2665.27 4166.55 L 2675.03 4177.53 L 2684.79 4166.55 L 2678.25 4166.55 C 2678.53 4156.57 2670.49 4149.76 2661.77 4149.49 C 2658.64 4149.33 2654.98 4150.31 2651.98 4152.06 Z M 2637.68 4165.5 L 2644.19 4165.5 C 2644.28 4173.56 2649.17 4178.41 2653.83 4180.48 C 2659.73 4183.35 2665.99 4182.2 2670.47 4179.56 L 2667.17 4175.86 C 2665.94 4176.64 2664.3 4177.17 2662.19 4177.42 C 2654.14 4177.85 2648.92 4171.86 2648.99 4165.5 L 2657.09 4165.5 L 2647.37 4154.08 Z M 2661.33 4196 C 2643.65 4196 2630 4181.65 2630 4167.16 C 2630 4148.84 2644.03 4136 2661.55 4136 C 2679.93 4136 2692.5 4151.02 2692.5 4165.37 C 2692.5 4184.2 2677.1 4196 2661.33 4196 Z" fill="#97d077" stroke="none" pointer-events="all"/><rect x="2112.51" y="4296" width="505" height="90" rx="6.3" ry="6.3" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 4303px; margin-left: 2115px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">timeoutCheck--定时超时检查<br /><ol><li>获取所有globalSession</li><li>如果状态不是Begin，或者没有超时的globalSession跳过</li><li>globalSession的active为false，状态变更为TimeoutRollBacking</li></ol></div></div></div></foreignObject><text x="2115" y="4315" fill="#000000" font-family="Helvetica" font-size="12px">timeoutCheck--定时超时检查...</text></switch></g><path d="M 2112.51 4476 L 765 4476 L 765 3706.1" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 765 3699.35 L 769.5 3708.35 L 765 3706.1 L 760.5 3708.35 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2112.51" y="4436" width="505" height="80" rx="5.6" ry="5.6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 4443px; margin-left: 2115px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">undoLogDelete--定时定时删除undolog记录<br /><ol><li>向RM发送UndoLogDeleteRequest请求，请求中带有saveDays参数，默认是7天，及记录默认最多保留七天。</li></ol></div></div></div></foreignObject><text x="2115" y="4455" fill="#000000" font-family="Helvetica" font-size="12px">undoLogDelete--定时定时删除undolog记录...</text></switch></g><rect x="2540" y="4306" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2565.25 4325.66 C 2567.36 4324.47 2569.45 4324.07 2571.53 4324.09 C 2579.9 4324.42 2584.02 4331.64 2583.35 4336.55 L 2575.27 4336.55 L 2585.03 4347.53 L 2594.79 4336.55 L 2588.25 4336.55 C 2588.53 4326.57 2580.49 4319.76 2571.77 4319.49 C 2568.64 4319.33 2564.98 4320.31 2561.98 4322.06 Z M 2547.68 4335.5 L 2554.19 4335.5 C 2554.28 4343.56 2559.17 4348.41 2563.83 4350.48 C 2569.73 4353.35 2575.99 4352.2 2580.47 4349.56 L 2577.17 4345.86 C 2575.94 4346.64 2574.3 4347.17 2572.19 4347.42 C 2564.14 4347.85 2558.92 4341.86 2558.99 4335.5 L 2567.09 4335.5 L 2557.37 4324.08 Z M 2571.33 4366 C 2553.65 4366 2540 4351.65 2540 4337.16 C 2540 4318.84 2554.03 4306 2571.55 4306 C 2589.93 4306 2602.5 4321.02 2602.5 4335.37 C 2602.5 4354.2 2587.1 4366 2571.33 4366 Z" fill="#97d077" stroke="none" pointer-events="all"/><rect x="2040" y="4406" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2065.25 4425.66 C 2067.36 4424.47 2069.45 4424.07 2071.53 4424.09 C 2079.9 4424.42 2084.02 4431.64 2083.35 4436.55 L 2075.27 4436.55 L 2085.03 4447.53 L 2094.79 4436.55 L 2088.25 4436.55 C 2088.53 4426.57 2080.49 4419.76 2071.77 4419.49 C 2068.64 4419.33 2064.98 4420.31 2061.98 4422.06 Z M 2047.68 4435.5 L 2054.19 4435.5 C 2054.28 4443.56 2059.17 4448.41 2063.83 4450.48 C 2069.73 4453.35 2075.99 4452.2 2080.47 4449.56 L 2077.17 4445.86 C 2075.94 4446.64 2074.3 4447.17 2072.19 4447.42 C 2064.14 4447.85 2058.92 4441.86 2058.99 4435.5 L 2067.09 4435.5 L 2057.37 4424.08 Z M 2071.33 4466 C 2053.65 4466 2040 4451.65 2040 4437.16 C 2040 4418.84 2054.03 4406 2071.55 4406 C 2089.93 4406 2102.5 4421.02 2102.5 4435.37 C 2102.5 4454.2 2087.1 4466 2071.33 4466 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 760 3656 L 700.1 3656" fill="none" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 693.35 3656 L 702.35 3651.5 L 700.1 3656 L 702.35 3660.5 Z" fill="#ffff00" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="760" y="3621" width="168" height="70" rx="10.5" ry="10.5" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 166px; height: 1px; padding-top: 3628px; margin-left: 762px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">接受到server端的删除请求，以保留天数为参数执行删除语句，默认一次请求最多删除3000条</div></div></div></foreignObject><text x="762" y="3640" fill="#000000" font-family="Helvetica" font-size="12px">接受到server端的删除请求，以保留天数为参数执行删除语句，默认一次请求最多删除3000条</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>