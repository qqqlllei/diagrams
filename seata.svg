<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="4361px" height="3551px" viewBox="-0.5 -0.5 4361 3551" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-09-14T08:29:20.443Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.6.2 Chrome/83.0.4103.122 Electron/9.2.0 Safari/537.36&quot; etag=&quot;VwwJLaRUw8nm4x3qylw4&quot; version=&quot;13.6.2&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;ft8qHBVG7MIYmR1m9sZa&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e6d0de-1-d5739d-1-s-0"><stop offset="0%" style="stop-color:#e6d0de"/><stop offset="100%" style="stop-color:#d5739d"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-d5e8d4-1-97d077-1-s-0"><stop offset="0%" style="stop-color:#d5e8d4"/><stop offset="100%" style="stop-color:#97d077"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffcd28-1-ffa500-1-s-0"><stop offset="0%" style="stop-color:#ffcd28"/><stop offset="100%" style="stop-color:#ffa500"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#fff2cc"/><stop offset="100%" style="stop-color:#ffd966"/></linearGradient></defs><g><rect x="0" y="0" width="4360" height="3550" rx="71" ry="71" fill="#e3c800" stroke="#b09500" pointer-events="all"/><path d="M 730 280 L 730 433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 730 438.88 L 726.5 431.88 L 730 433.63 L 733.5 431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="425" y="50" width="610" height="230" rx="6.9" ry="6.9" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 608px; height: 1px; padding-top: 57px; margin-left: 427px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">GlobalTransactionScanner<br />initClient初始化客户端<br />GlobalTransactionScanner实现了AbstractAutoProxyCreate<br />在创建类的时候，会对一些对象做特殊处理<br /><br /><br /><font style="font-size: 13px" color="#ffff00"><b>在执行isTccAutoProxy方法时，如果当前被解析的bean是远程接口如dubbo，sofa等（Feign，相关的需加上@LocalTCC，不依赖于指定框架，远程调用协议即可，在调用之前绑定xid等逻辑都要满足），如果是服务端接口，且接口上带有@TwoPhaseBusinessAction注解，则会将该接口当成资源注册到TC上,并且在本地存入tccResource信息，tccResource中存有commitMethod，rollbackMethod信息及TCC第二阶段的时候，会获取改信息来执行相应的方法。如果是消费端类型，在其他bean引用该远程接口时，会给该对象添加上拦截器TccActionInterceptor，一般需要引用远程接口的类的方法上又会有@GlobalTransactional注解即全局事务的发起方。</b></font></div></div></div></foreignObject><text x="427" y="69" fill="#ffffff" font-family="Helvetica" font-size="12px">GlobalTransactionScanner...</text></switch></g><rect x="825.75" y="70" width="90" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 85px; margin-left: 827px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RMClient.init</div></div></div></foreignObject><text x="871" y="89" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">RMClient.init</text></switch></g><rect x="930" y="70" width="90" height="30" rx="4.5" ry="4.5" fill="#a0522d" stroke="#6d1f00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 85px; margin-left: 931px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TMClient.init</div></div></div></foreignObject><text x="975" y="89" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">TMClient.init</text></switch></g><path d="M 730 530 L 730 663.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 730 668.88 L 726.5 661.88 L 730 663.63 L 733.5 661.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="575" y="440" width="310" height="90" rx="2.7" ry="2.7" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 447px; margin-left: 577px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">对带有GlobalTransactional、GlobalLock注解的bean添加增强。增强类为GlobalTransactionalInterceptor，控制着全局事务，一旦带有注解的方便执行，则会进入GlobalTransactionalInterceptor的invoke方法。</div></div></div></foreignObject><text x="577" y="459" fill="#ffffff" font-family="Helvetica" font-size="12px">对带有GlobalTransactional、GlobalLock注解的bean添加增强。增强类为GlobalTransactiona...</text></switch></g><rect x="270" y="670" width="920" height="410" rx="8.2" ry="8.2" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 918px; height: 1px; padding-top: 677px; margin-left: 272px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleGlobalTransaction<br />1：getTransactionInfo获取事务信息，隔离级别，回滚规则等信息。<br />2：getCurrentOrCreate：获取全局事务，如果不存在就创建一个，如果是新创建的，则role为launcher及发起者。<br />3：根据隔离级别决定是否挂起当前事务。<br />4：beginTransaction，开始全局事务<br />5：执行自己的业务逻辑<br />6：根据是否发生异常决定是commit还是rollback<div><br /></div><div><br /></div></div></div></div></foreignObject><text x="272" y="689" fill="#ffffff" font-family="Helvetica" font-size="12px">handleGlobalTransaction...</text></switch></g><rect x="517" y="790" width="426" height="115" rx="3.45" ry="3.45" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 424px; height: 1px; padding-top: 797px; margin-left: 519px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">beginTransaction<br />1：triggerBeforeBegin前置钩子函数<br />2：DefaultTransactionManager.begin，构建GlobalBeginRequest请求对象，同步调用server端，server会返回GlobalBeginResponse对象。接受server返回的xid，设置status为Begin。绑定xid到当前线程。<br />3：triggerAfterBegin后置钩子函数</div></div></div></foreignObject><text x="519" y="809" fill="#000000" font-family="Helvetica" font-size="12px">beginTransaction...</text></switch></g><rect x="515" y="940" width="428" height="90" rx="2.7" ry="2.7" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 426px; height: 1px; padding-top: 947px; margin-left: 517px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">执行自己的业务的时候，就会调用远程服务了，远程调用会传递xid给全局事务参与者，在执行数据库相关操作的时候会被DataSourceProxy、ConnectionProxy、PreparedStatementProxy做相应拦截做特殊处理<div><br /></div></div></div></div></foreignObject><text x="517" y="959" fill="#000000" font-family="Helvetica" font-size="12px">执行自己的业务的时候，就会调用远程服务了，远程调用会传递xid给全局事务参与者，在执行数据库相关操作的时候会被DataSourceProxy、ConnectionProxy、PreparedStatementProxy做相应拦截做特殊处理&#xa;</text></switch></g><rect x="1650" y="50" width="1166" height="1030" rx="51.5" ry="51.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><path d="M 1993.5 120 L 1993.5 163.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1993.5 168.88 L 1990 161.88 L 1993.5 163.63 L 1997 161.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1853.5" y="70" width="280" height="50" rx="7.5" ry="7.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 77px; margin-left: 1855px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DataSourceProxy<br />调用getConnection返回ConnectionProxy</div></div></div></foreignObject><text x="1994" y="89" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DataSourceProxy...</text></switch></g><path d="M 1993.5 270 L 1993.5 313.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1993.5 318.88 L 1990 311.88 L 1993.5 313.63 L 1997 311.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2181 245 L 2423.5 245 L 2423.5 313.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2423.5 318.88 L 2420 311.88 L 2423.5 313.63 L 2427 311.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1806" y="170" width="375" height="100" rx="3" ry="3" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 373px; height: 1px; padding-top: 220px; margin-left: 1807px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ConnectionProxy<br />prepareStatement方法创建PreparedStatementProxy对象，<font color="#cc0000"><b>（如果不是AT模式，则undolog相关的模块会跳过）</b></font>执行execute会调用ExecuteTemplate的execute方法，该方法会根据具体执行的sql语句构建不同的executor对象，最终执行executer的execute方法。</div></div></div></foreignObject><text x="1994" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ConnectionProxy...</text></switch></g><rect x="2276" y="120" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 140px; margin-left: 2277px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">InsertExecutor</div></div></div></foreignObject><text x="2351" y="144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">InsertExecutor</text></switch></g><rect x="2456" y="120" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 140px; margin-left: 2457px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">UpdateExecutor</div></div></div></foreignObject><text x="2531" y="144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">UpdateExecutor</text></switch></g><rect x="2276" y="180" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 200px; margin-left: 2277px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DeleteExecutor</div></div></div></foreignObject><text x="2351" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DeleteExecutor</text></switch></g><rect x="2456" y="180" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 200px; margin-left: 2457px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SelectForUpdateExecutor</div></div></div></foreignObject><text x="2531" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">SelectForUpdateExecutor</text></switch></g><rect x="2627" y="120" width="150" height="40" rx="6" ry="6" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 140px; margin-left: 2628px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PlainExecutor</div></div></div></foreignObject><text x="2702" y="144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PlainExecutor</text></switch></g><rect x="1806" y="320" width="375" height="240" rx="7.2" ry="7.2" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 373px; height: 1px; padding-top: 327px; margin-left: 1807px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">executeAutoCommitFalse</div></div></div></foreignObject><text x="1994" y="339" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">executeAutoCommitFalse</text></switch></g><rect x="1902.25" y="350" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 365px; margin-left: 1903px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">beforeImage</div></div></div></foreignObject><text x="1994" y="369" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">beforeImage</text></switch></g><rect x="1902.25" y="410" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 425px; margin-left: 1903px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">执行目标sql语句</div></div></div></foreignObject><text x="1994" y="429" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">执行目标sql语句</text></switch></g><rect x="1902.25" y="460" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 475px; margin-left: 1903px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">afterImage</div></div></div></foreignObject><text x="1994" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">afterImage</text></switch></g><rect x="1902.25" y="510" width="182.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 525px; margin-left: 1903px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">prepareUndoLog</div></div></div></foreignObject><text x="1994" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">prepareUndoLog</text></switch></g><rect x="1676" y="590" width="1034" height="440" rx="13.2" ry="13.2" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1032px; height: 1px; padding-top: 597px; margin-left: 1677px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doCommit</div></div></div></foreignObject><text x="2193" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">doCommit</text></switch></g><rect x="1731" y="620" width="440" height="390" rx="19.5" ry="19.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 627px; margin-left: 1732px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">processGlobalTransactionCommit</div></div></div></foreignObject><text x="1951" y="639" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">processGlobalTransactionCommit</text></switch></g><rect x="1822.19" y="650" width="258.12" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 657px; margin-left: 1823px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">register<br />发送BranchRegisterRequest请求<br />返回branchId存储在ConnectionContext对象中</div></div></div></foreignObject><text x="1951" y="669" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">register...</text></switch></g><path d="M 2161.25 747.5 L 2255.7 747.5 L 2255.7 706.3 L 2343.63 706.25" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2348.88 706.25 L 2341.88 709.75 L 2343.63 706.25 L 2341.88 702.75 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1741.25" y="730" width="420" height="70" rx="10.5" ry="10.5" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 737px; margin-left: 1742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">flushUndoLogs<br />undoLogs入库，undoLogs记录数是以事务来划分，同一个事物undoLog是一条记录，记录里的rollback_info里的json数据其中sqlUndoLogs是以sql语句划分，执行多少个sql，就会有多少个SqlUndoLog记录</div></div></div></foreignObject><text x="1951" y="749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">flushUndoLogs...</text></switch></g><rect x="1821.94" y="810" width="258.12" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 817px; margin-left: 1823px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">targetConnection.commit</div></div></div></foreignObject><text x="1951" y="829" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">targetConnection.commit</text></switch></g><rect x="1821.94" y="860" width="258.12" height="60" rx="9" ry="9" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 867px; margin-left: 1823px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">report<br />发送BranchReportRequest请求<br />上报分支事务第一阶段执行成功。</div></div></div></foreignObject><text x="1951" y="879" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">report...</text></switch></g><rect x="1821.94" y="940" width="258.12" height="60" rx="9" ry="9" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 947px; margin-left: 1823px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">reset<br />xid,branchId,lockKeysBuffer,<br />sqlUndoItemsBuffer属性置空</div></div></div></foreignObject><text x="1951" y="959" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">reset...</text></switch></g><rect x="55" y="1160" width="4250" height="2370" rx="47.4" ry="47.4" fill="#647687" stroke="#314354" pointer-events="all"/><path d="M 405.81 1352.99 L 405.8 1465 L 495 1465 L 495 1569.9" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 495 1576.65 L 490.5 1567.65 L 495 1569.9 L 499.5 1567.65 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 277.5 1350 L 277.5 2525 L 639.9 2525" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 646.65 2525 L 637.65 2529.5 L 639.9 2525 L 637.65 2520.5 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="160" y="1220" width="470" height="130" rx="15.6" ry="15.6" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 1285px; margin-left: 161px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TM</div></div></div></foreignObject><text x="395" y="1289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TM</text></switch></g><rect x="2010" y="1220" width="880" height="2300" rx="44" ry="44" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 878px; height: 1px; padding-top: 1227px; margin-left: 2011px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px"><b>TC</b></font></div></div></div></foreignObject><text x="2450" y="1239" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TC</text></switch></g><path d="M 495 1780 L 495 2060 L 579.9 2060" fill="none" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.65 2060 L 577.65 2064.5 L 579.9 2060 L 577.65 2055.5 Z" fill="#0066cc" stroke="#0066cc" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="290" y="1580" width="410" height="200" rx="12" ry="12" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 408px; height: 1px; padding-top: 1587px; margin-left: 292px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="292" y="1599" fill="#000000" font-family="Helvetica" font-size="12px">RM</text></switch></g><path d="M 330 1655 C 330 1646.72 347.91 1640 370 1640 C 380.61 1640 390.78 1641.58 398.28 1644.39 C 405.79 1647.21 410 1651.02 410 1655 L 410 1685 C 410 1693.28 392.09 1700 370 1700 C 347.91 1700 330 1693.28 330 1685 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 410 1655 C 410 1663.28 392.09 1670 370 1670 C 347.91 1670 330 1663.28 330 1655" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1670px; margin-left: 331px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="370" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><rect x="395" y="1440" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 1450px; margin-left: 396px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="433" y="1454" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><rect x="650" y="2390" width="350" height="180" rx="27" ry="27" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 2480px; margin-left: 651px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="825" y="2484" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RM</text></switch></g><rect x="200" y="1840" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 1850px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="238" y="1854" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><path d="M 850 2015 L 2001.66 2015.79" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 2008.41 2015.8 L 1999.4 2020.29 L 2001.66 2015.79 L 1999.41 2011.29 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="590" y="1970" width="260" height="180" rx="5.4" ry="5.4" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 1977px; margin-left: 592px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="592" y="1989" fill="#000000" font-family="Helvetica" font-size="12px">RM</text></switch></g><rect x="499" y="1830" width="75" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 1840px; margin-left: 500px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">远程调用</div></div></div></foreignObject><text x="537" y="1844" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">远程调用</text></switch></g><path d="M 598 2096.5 C 598 2088.22 615.91 2081.5 638 2081.5 C 648.61 2081.5 658.78 2083.08 666.28 2085.89 C 673.79 2088.71 678 2092.52 678 2096.5 L 678 2126.5 C 678 2134.78 660.09 2141.5 638 2141.5 C 615.91 2141.5 598 2134.78 598 2126.5 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 678 2096.5 C 678 2104.78 660.09 2111.5 638 2111.5 C 615.91 2111.5 598 2104.78 598 2096.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 2112px; margin-left: 599px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="638" y="2115" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><path d="M 670 2515 C 670 2506.72 687.91 2500 710 2500 C 720.61 2500 730.78 2501.58 738.28 2504.39 C 745.79 2507.21 750 2511.02 750 2515 L 750 2545 C 750 2553.28 732.09 2560 710 2560 C 687.91 2560 670 2553.28 670 2545 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 750 2515 C 750 2523.28 732.09 2530 710 2530 C 687.91 2530 670 2523.28 670 2515" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 2530px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><br /><br />DB</div></div></div></foreignObject><text x="710" y="2534" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DB...</text></switch></g><rect x="740" y="1590" width="92.5" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 91px; height: 1px; padding-top: 1597px; margin-left: 742px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister</div></div></div></foreignObject><text x="742" y="1609" fill="#000000" font-family="Helvetica" font-size="12px">branchRegister</text></switch></g><path d="M 560 1670 L 418.24 1670" fill="none" stroke="#ffff00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 412.24 1670 L 420.24 1666 L 418.24 1670 L 420.24 1674 Z" fill="#ffff00" stroke="#ffff00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="560" y="1650" width="118" height="40" rx="6" ry="6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 116px; height: 1px; padding-top: 1657px; margin-left: 562px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">存储undoLog到数据库，执行目标sql到库</div></div></div></foreignObject><text x="562" y="1669" fill="#000000" font-family="Helvetica" font-size="12px">存储undoLog到数据库，执行目标sql到库</text></switch></g><path d="M 991.88 1950 L 991.9 1295 L 613.1 1295" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 606.35 1295 L 615.35 1290.5 L 613.1 1295 L 615.35 1299.5 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="863.75" y="1950" width="256.25" height="50" rx="7.5" ry="7.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 254px; height: 1px; padding-top: 1975px; margin-left: 865px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister超时或者有RuntimeException，整体不一致，TM需要执行rollback逻辑</div></div></div></foreignObject><text x="992" y="1979" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">branchRegister超时或者有RuntimeException，整体不一致，TM需要执行rollback逻辑</text></switch></g><rect x="470" y="1280" width="133" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 131px; height: 1px; padding-top: 1287px; margin-left: 472px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">catch到异常，发送GlobalRollbackRequest请求。</div></div></div></foreignObject><text x="472" y="1299" fill="#000000" font-family="Helvetica" font-size="12px">catch到异常，发送GlobalRollbackReq...</text></switch></g><path d="M 490 1740 L 370 1740 L 370 1710.1" fill="none" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370 1703.35 L 374.5 1712.35 L 370 1710.1 L 365.5 1712.35 Z" fill="#ffff00" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="490" y="1720" width="198" height="40" rx="6" ry="6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 196px; height: 1px; padding-top: 1727px; margin-left: 492px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">客户端执行undo操作，将数据还原为全局事务之前的状态。删除undolog</div></div></div></foreignObject><text x="492" y="1739" fill="#000000" font-family="Helvetica" font-size="12px">客户端执行undo操作，将数据还原为全局事务之前的状态。删除undolog</text></switch></g><rect x="2085" y="1260" width="680" height="1350" rx="6.8" ry="6.8" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 678px; height: 1px; padding-top: 1267px; margin-left: 2086px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 13px"><b>DefaultCoordinator</b></font></div></div></div></foreignObject><text x="2425" y="1279" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DefaultCoordinator</text></switch></g><path d="M 2745 1372.5 L 2745 1368 L 3213 1368 L 3671.76 1367.51" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3677.76 1367.5 L 3669.77 1371.51 L 3671.76 1367.51 L 3669.76 1363.51 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="2135" y="1320" width="610" height="210" rx="31.5" ry="31.5" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1327px; margin-left: 2136px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalBegin</div></div></div></foreignObject><text x="2440" y="1339" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalBegin</text></switch></g><rect x="2155" y="1350" width="570" height="160" rx="11.2" ry="11.2" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 1357px; margin-left: 2157px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DefaultCore.begin<br /><ol><li>GlobalSession.createGlobalSession创建全局事务session</li><li>添加session生命周期监听器，类型为SessionManager的监听器，如果使用的存储时DB,则监听器为DataBaseSessionManager。</li><li>GlobalSession执行begin，开启全局事务。设置status为begin，设置开始时间属性，调用生命周期监听器的onBegin方法即此时会执行DataBaseSessinoManage的insertGlobalTransactionDO方法，将globalSession存储到DB中。</li><li>发送全局事务开始事件GlobalTransactionEvent</li><li>返回全局事务的xid到TM</li></ol></div></div></div></foreignObject><text x="2157" y="1369" fill="#000000" font-family="Helvetica" font-size="12px">DefaultCore.begin...</text></switch></g><rect x="2135" y="1605" width="610" height="235" rx="35.25" ry="35.25" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1612px; margin-left: 2136px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doBranchRegister</div></div></div></foreignObject><text x="2440" y="1624" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doBranchRegister</text></switch></g><rect x="2155" y="1640" width="570" height="180" rx="12.6" ry="12.6" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 1647px; margin-left: 2157px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister<br /><ol><li>获取根据xId获取GlobalSession</li><li>检查GlobalSession的状态</li><li>添加生命周期监听器</li><li>创建branchSession，设置xid，transactionId，branchId，branchType，resourceId，lockKeys</li><li>AT模式下branchSessionLock，分支加锁，行级锁。在lock_table中加入记录，pk为处理中记录的主键，只有加锁成功才会继续执行。</li><li>globalSession.addBranch,分支事务落库，设置branchSession状态为registered，添加branchSession到属性集合branchSessions中。</li><li>返回branchSession的branchId。</li></ol></div></div></div></foreignObject><text x="2157" y="1659" fill="#000000" font-family="Helvetica" font-size="12px">branchRegister...</text></switch></g><rect x="2135" y="1900" width="610" height="160" rx="24" ry="24" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1907px; margin-left: 2136px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doBranchReport(默认不发送该类型消息)</div></div></div></foreignObject><text x="2440" y="1919" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doBranchReport(默认不发送该类型消息)</text></switch></g><rect x="2155" y="1930" width="570" height="110" rx="7.7" ry="7.7" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 1937px; margin-left: 2157px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchReport<br /><ol><li>获取globalSession，且globalSession包含branchSession信息。</li><li>根据分支branchId从globalSession中获取branchSession</li><li>添加生命周期监听器</li><li>更新branchSession状态为PhaseOne_Done,库中状态同步更新。</li></ol></div></div></div></foreignObject><text x="2157" y="1949" fill="#000000" font-family="Helvetica" font-size="12px">branchReport...</text></switch></g><rect x="2135" y="2130" width="610" height="180" rx="27" ry="27" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 2137px; margin-left: 2136px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalCommit</div></div></div></foreignObject><text x="2440" y="2149" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalCommit</text></switch></g><rect x="2155" y="2160" width="570" height="120" rx="8.4" ry="8.4" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 2167px; margin-left: 2157px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">commit<br /><ol><li>根据xid获取globalSession</li><li>添加生命周期监听器</li><li>设置globalSession的active属性为false，释放所有branchSession的锁</li><li>更改globalSession的状态为committing</li><li>如果是AT模式异步提交全局事务</li><li>返回全局事务提交状态</li></ol></div></div></div></foreignObject><text x="2157" y="2179" fill="#000000" font-family="Helvetica" font-size="12px">commit...</text></switch></g><path d="M 2135 2475 L 1260 2475 L 1260 1740 L 698.1 1740" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 691.35 1740 L 700.35 1735.5 L 698.1 1740 L 700.35 1744.5 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2135" y="2370" width="610" height="210" rx="31.5" ry="31.5" fill="#6a00ff" stroke="#3700cc" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 2377px; margin-left: 2136px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">doGlobalRollback</div></div></div></foreignObject><text x="2440" y="2389" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">doGlobalRollback</text></switch></g><rect x="2155" y="2400" width="570" height="150" rx="10.5" ry="10.5" fill="#e3c800" stroke="#b09500" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 2407px; margin-left: 2157px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">rollback<br /><ol><li>根据xid获取globalSession</li><li>添加生命周期监听器</li><li>设置globalSession的active属性为false<br /></li><li>设置globalSession的状态为rollbacking</li><li>发送branchRollbackRequest</li><li>根据RM返回phaseTwo_Rollbacked 状态，服务端执行removeBranch</li><li>根据branchSession删除DB中branch记录，删除lock记录，删除内存中globalSession的branchSession</li></ol></div></div></div></foreignObject><text x="2157" y="2419" fill="#000000" font-family="Helvetica" font-size="12px">rollback...</text></switch></g><path d="M 630 1285 L 2440 1285 L 2440 1309.9" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2440 1316.65 L 2435.5 1307.65 L 2440 1309.9 L 2444.5 1307.65 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 700 1630 L 1418 1630 L 1418 1663.75 L 2124.9 1663.75" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2131.65 1663.75 L 2122.65 1668.25 L 2124.9 1663.75 L 2122.65 1659.25 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 2133 1720 L 1405.5 1720 L 1405.5 1670 L 688.1 1670" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 681.35 1670 L 690.35 1665.5 L 688.1 1670 L 690.35 1674.5 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 569.75 1340 L 569.8 1400 L 1330 1400 L 1330 2422.5 L 2124.9 2422.5" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 2131.65 2422.5 L 2122.65 2427 L 2124.9 2422.5 L 2122.65 2418 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><path d="M 638.5 1760 L 638.5 1800 L 1180 1800 L 1180 2527.5 L 2124.9 2527.5" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><path d="M 2131.65 2527.5 L 2122.65 2532 L 2124.9 2527.5 L 2122.65 2523 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1248.5" cy="1261.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1262px; margin-left: 1231px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">1</div></div></div></foreignObject><text x="1249" y="1270" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">1</text></switch></g><ellipse cx="1419.5" cy="1338.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1339px; margin-left: 1402px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">2</div></div></div></foreignObject><text x="1420" y="1347" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">2</text></switch></g><ellipse cx="518.5" cy="1507.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1508px; margin-left: 501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">3</div></div></div></foreignObject><text x="519" y="1516" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">3</text></switch></g><ellipse cx="1028.5" cy="1528.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1529px; margin-left: 1011px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">8</div></div></div></foreignObject><text x="1029" y="1537" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">8</text></switch></g><ellipse cx="1358.5" cy="1511.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1512px; margin-left: 1341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">9</div></div></div></foreignObject><text x="1359" y="1520" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">9</text></switch></g><ellipse cx="1178.5" cy="1605" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1605px; margin-left: 1161px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">4</div></div></div></foreignObject><text x="1179" y="1613" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">4</text></switch></g><ellipse cx="1188.5" cy="1681.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1682px; margin-left: 1171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">5</div></div></div></foreignObject><text x="1189" y="1690" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">5</text></switch></g><ellipse cx="1258.5" cy="1858.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1859px; margin-left: 1241px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">10</div></div></div></foreignObject><text x="1259" y="1866" fill="#CC0000" font-family="Helvetica" font-size="25px" text-anchor="middle">10</text></switch></g><ellipse cx="533.19" cy="1911.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1912px; margin-left: 516px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">6</div></div></div></foreignObject><text x="533" y="1920" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">6</text></switch></g><ellipse cx="991.5" cy="2041.5" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2042px; margin-left: 974px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">7</div></div></div></foreignObject><text x="992" y="2050" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">7</text></switch></g><ellipse cx="1208.5" cy="2220" rx="18.5" ry="18.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2220px; margin-left: 1191px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">11</div></div></div></foreignObject><text x="1209" y="2228" fill="#CC0000" font-family="Helvetica" font-size="25px" text-anchor="middle">11</text></switch></g><path d="M 2135 1372.5 L 1382.5 1372.5 L 1382.5 1334 L 641.98 1334.01" fill="none" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 635.23 1334.01 L 644.23 1329.51 L 641.98 1334.01 L 644.23 1338.51 Z" fill="#66cc00" stroke="#66cc00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="670" y="1370" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 695.25 1389.66 C 697.36 1388.47 699.45 1388.07 701.53 1388.09 C 709.9 1388.42 714.02 1395.64 713.35 1400.55 L 705.27 1400.55 L 715.03 1411.53 L 724.79 1400.55 L 718.25 1400.55 C 718.53 1390.57 710.49 1383.76 701.77 1383.49 C 698.64 1383.33 694.98 1384.31 691.98 1386.06 Z M 677.68 1399.5 L 684.19 1399.5 C 684.28 1407.56 689.17 1412.41 693.83 1414.48 C 699.73 1417.35 705.99 1416.2 710.47 1413.56 L 707.17 1409.86 C 705.94 1410.64 704.3 1411.17 702.19 1411.42 C 694.14 1411.85 688.92 1405.86 688.99 1399.5 L 697.09 1399.5 L 687.37 1388.08 Z M 701.33 1430 C 683.65 1430 670 1415.65 670 1401.16 C 670 1382.84 684.03 1370 701.55 1370 C 719.93 1370 732.5 1385.02 732.5 1399.37 C 732.5 1418.2 717.1 1430 701.33 1430 Z" fill="#ffff00" stroke="none" pointer-events="all"/><rect x="2083.13" y="2710" width="683.75" height="780" rx="13.68" ry="13.68" fill="#ffcccc" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 682px; height: 1px; padding-top: 2717px; margin-left: 2085px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">定时JOB</div></div></div></foreignObject><text x="2085" y="2742" fill="#000000" font-family="Helvetica" font-size="25px">定时JOB</text></switch></g><path d="M 2677.5 2815 L 2677.5 2810 L 2780 2810 L 2780 2475 L 2755.1 2475" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2748.35 2475 L 2757.35 2470.5 L 2755.1 2475 L 2757.35 2479.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2172.5" y="2760" width="505" height="110" rx="7.7" ry="7.7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 2767px; margin-left: 2175px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleRetryRollbacking--定时重拾回滚任务<br /><ol><li>获取状态为RollbackRetrying、Rollbacking、TimeoutRollbacking、TimeoutRollbackRetrying的所有globalSession</li><li>检查globalSession的状态，如果是rollbacking且还没有重试超时，跳过</li><li>检查是否重试超时，如果超时删除globalSession，默认一直重试</li><li>调用doGlobalRollback</li></ol></div></div></div></foreignObject><text x="2175" y="2779" fill="#000000" font-family="Helvetica" font-size="12px">handleRetryRollbacking--定时重拾回滚任务...</text></switch></g><rect x="2690" y="2740" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2715.25 2759.66 C 2717.36 2758.47 2719.45 2758.07 2721.53 2758.09 C 2729.9 2758.42 2734.02 2765.64 2733.35 2770.55 L 2725.27 2770.55 L 2735.03 2781.53 L 2744.79 2770.55 L 2738.25 2770.55 C 2738.53 2760.57 2730.49 2753.76 2721.77 2753.49 C 2718.64 2753.33 2714.98 2754.31 2711.98 2756.06 Z M 2697.68 2769.5 L 2704.19 2769.5 C 2704.28 2777.56 2709.17 2782.41 2713.83 2784.48 C 2719.73 2787.35 2725.99 2786.2 2730.47 2783.56 L 2727.17 2779.86 C 2725.94 2780.64 2724.3 2781.17 2722.19 2781.42 C 2714.14 2781.85 2708.92 2775.86 2708.99 2769.5 L 2717.09 2769.5 L 2707.37 2758.08 Z M 2721.33 2800 C 2703.65 2800 2690 2785.65 2690 2771.16 C 2690 2752.84 2704.03 2740 2721.55 2740 C 2739.93 2740 2752.5 2755.02 2752.5 2769.37 C 2752.5 2788.2 2737.1 2800 2721.33 2800 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 2677.51 2950 L 2810 2950 L 2810 2220 L 2755.1 2220" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2748.35 2220 L 2757.35 2215.5 L 2755.1 2220 L 2757.35 2224.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2172.51" y="2900" width="505" height="100" rx="7" ry="7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 2907px; margin-left: 2175px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleRetryCommitting--定时重拾提交任务<br /><ol><li>获取状态为CommitRetrying的所有globalSession</li><li>检擦是否重拾超时，如果超时删除globalSession</li><li>调用doGlobalCommit</li></ol></div></div></div></foreignObject><text x="2175" y="2919" fill="#000000" font-family="Helvetica" font-size="12px">handleRetryCommitting--定时重拾提交任务...</text></switch></g><rect x="2690" y="2880" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2715.25 2899.66 C 2717.36 2898.47 2719.45 2898.07 2721.53 2898.09 C 2729.9 2898.42 2734.02 2905.64 2733.35 2910.55 L 2725.27 2910.55 L 2735.03 2921.53 L 2744.79 2910.55 L 2738.25 2910.55 C 2738.53 2900.57 2730.49 2893.76 2721.77 2893.49 C 2718.64 2893.33 2714.98 2894.31 2711.98 2896.06 Z M 2697.68 2909.5 L 2704.19 2909.5 C 2704.28 2917.56 2709.17 2922.41 2713.83 2924.48 C 2719.73 2927.35 2725.99 2926.2 2730.47 2923.56 L 2727.17 2919.86 C 2725.94 2920.64 2724.3 2921.17 2722.19 2921.42 C 2714.14 2921.85 2708.92 2915.86 2708.99 2909.5 L 2717.09 2909.5 L 2707.37 2898.08 Z M 2721.33 2940 C 2703.65 2940 2690 2925.65 2690 2911.16 C 2690 2892.84 2704.03 2880 2721.55 2880 C 2739.93 2880 2752.5 2895.02 2752.5 2909.37 C 2752.5 2928.2 2737.1 2940 2721.33 2940 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 2677.51 3080 L 2840 3080 L 2840 2175 L 2755.1 2175" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2748.35 2175 L 2757.35 2170.5 L 2755.1 2175 L 2757.35 2179.5 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2172.51" y="3030" width="505" height="100" rx="7" ry="7" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 3037px; margin-left: 2175px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleAsyncCommitting--定时异步提交任务，AT模式的事务<br /><ol><li>获取状态为AsyncCommitting的所有globalSession</li><li>调用doGlobalCommit</li><li>AT模式下支持异步提交，该提交发送branchCommitRequest到RM</li></ol></div></div></div></foreignObject><text x="2175" y="3049" fill="#000000" font-family="Helvetica" font-size="12px">handleAsyncCommitting--定时异步提交任务，AT模式的事务...</text></switch></g><rect x="2690" y="3010" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2715.25 3029.66 C 2717.36 3028.47 2719.45 3028.07 2721.53 3028.09 C 2729.9 3028.42 2734.02 3035.64 2733.35 3040.55 L 2725.27 3040.55 L 2735.03 3051.53 L 2744.79 3040.55 L 2738.25 3040.55 C 2738.53 3030.57 2730.49 3023.76 2721.77 3023.49 C 2718.64 3023.33 2714.98 3024.31 2711.98 3026.06 Z M 2697.68 3039.5 L 2704.19 3039.5 C 2704.28 3047.56 2709.17 3052.41 2713.83 3054.48 C 2719.73 3057.35 2725.99 3056.2 2730.47 3053.56 L 2727.17 3049.86 C 2725.94 3050.64 2724.3 3051.17 2722.19 3051.42 C 2714.14 3051.85 2708.92 3045.86 2708.99 3039.5 L 2717.09 3039.5 L 2707.37 3028.08 Z M 2721.33 3070 C 2703.65 3070 2690 3055.65 2690 3041.16 C 2690 3022.84 2704.03 3010 2721.55 3010 C 2739.93 3010 2752.5 3025.02 2752.5 3039.37 C 2752.5 3058.2 2737.1 3070 2721.33 3070 Z" fill="#97d077" stroke="none" pointer-events="all"/><rect x="2172.51" y="3170" width="505" height="90" rx="6.3" ry="6.3" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 3177px; margin-left: 2175px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">timeoutCheck--定时超时检查<br /><ol><li>获取所有globalSession</li><li>如果状态不是Begin，或者没有超时的globalSession跳过</li><li>globalSession的active为false，状态变更为TimeoutRollBacking</li></ol></div></div></div></foreignObject><text x="2175" y="3189" fill="#000000" font-family="Helvetica" font-size="12px">timeoutCheck--定时超时检查...</text></switch></g><path d="M 2172.51 3350 L 825 3350 L 825 2580.1" fill="none" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 825 2573.35 L 829.5 2582.35 L 825 2580.1 L 820.5 2582.35 Z" fill="#67ab9f" stroke="#67ab9f" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="2172.51" y="3310" width="505" height="80" rx="5.6" ry="5.6" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 503px; height: 1px; padding-top: 3317px; margin-left: 2175px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">undoLogDelete--定时定时删除undolog记录<br /><ol><li>向RM发送UndoLogDeleteRequest请求，请求中带有saveDays参数，默认是7天，及记录默认最多保留七天。</li></ol></div></div></div></foreignObject><text x="2175" y="3329" fill="#000000" font-family="Helvetica" font-size="12px">undoLogDelete--定时定时删除undolog记录...</text></switch></g><rect x="2600" y="3180" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2625.25 3199.66 C 2627.36 3198.47 2629.45 3198.07 2631.53 3198.09 C 2639.9 3198.42 2644.02 3205.64 2643.35 3210.55 L 2635.27 3210.55 L 2645.03 3221.53 L 2654.79 3210.55 L 2648.25 3210.55 C 2648.53 3200.57 2640.49 3193.76 2631.77 3193.49 C 2628.64 3193.33 2624.98 3194.31 2621.98 3196.06 Z M 2607.68 3209.5 L 2614.19 3209.5 C 2614.28 3217.56 2619.17 3222.41 2623.83 3224.48 C 2629.73 3227.35 2635.99 3226.2 2640.47 3223.56 L 2637.17 3219.86 C 2635.94 3220.64 2634.3 3221.17 2632.19 3221.42 C 2624.14 3221.85 2618.92 3215.86 2618.99 3209.5 L 2627.09 3209.5 L 2617.37 3198.08 Z M 2631.33 3240 C 2613.65 3240 2600 3225.65 2600 3211.16 C 2600 3192.84 2614.03 3180 2631.55 3180 C 2649.93 3180 2662.5 3195.02 2662.5 3209.37 C 2662.5 3228.2 2647.1 3240 2631.33 3240 Z" fill="#97d077" stroke="none" pointer-events="all"/><rect x="2100" y="3280" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 2125.25 3299.66 C 2127.36 3298.47 2129.45 3298.07 2131.53 3298.09 C 2139.9 3298.42 2144.02 3305.64 2143.35 3310.55 L 2135.27 3310.55 L 2145.03 3321.53 L 2154.79 3310.55 L 2148.25 3310.55 C 2148.53 3300.57 2140.49 3293.76 2131.77 3293.49 C 2128.64 3293.33 2124.98 3294.31 2121.98 3296.06 Z M 2107.68 3309.5 L 2114.19 3309.5 C 2114.28 3317.56 2119.17 3322.41 2123.83 3324.48 C 2129.73 3327.35 2135.99 3326.2 2140.47 3323.56 L 2137.17 3319.86 C 2135.94 3320.64 2134.3 3321.17 2132.19 3321.42 C 2124.14 3321.85 2118.92 3315.86 2118.99 3309.5 L 2127.09 3309.5 L 2117.37 3298.08 Z M 2131.33 3340 C 2113.65 3340 2100 3325.65 2100 3311.16 C 2100 3292.84 2114.03 3280 2131.55 3280 C 2149.93 3280 2162.5 3295.02 2162.5 3309.37 C 2162.5 3328.2 2147.1 3340 2131.33 3340 Z" fill="#97d077" stroke="none" pointer-events="all"/><path d="M 820 2530 L 760.1 2530" fill="none" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 753.35 2530 L 762.35 2525.5 L 760.1 2530 L 762.35 2534.5 Z" fill="#ffff00" stroke="#ffff00" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/><rect x="820" y="2495" width="168" height="70" rx="10.5" ry="10.5" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 166px; height: 1px; padding-top: 2502px; margin-left: 822px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">接受到server端的删除请求，以保留天数为参数执行删除语句，默认一次请求最多删除3000条。</div></div></div></foreignObject><text x="822" y="2514" fill="#000000" font-family="Helvetica" font-size="12px">接受到server端的删除请求，以保留天数为参数执行删除语句，默认一次请求最多删除3000条。</text></switch></g><rect x="960" y="1180" width="210" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 1210px; margin-left: 961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 28px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">AT</div></div></div></foreignObject><text x="1065" y="1218" fill="#FFFF00" font-family="Helvetica" font-size="28px" text-anchor="middle" font-weight="bold">AT</text></switch></g><rect x="3165" y="1160" width="220" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1200px; margin-left: 3166px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 28px; font-family: Helvetica; color: #FFB570; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">TCC</div></div></div></foreignObject><text x="3275" y="1208" fill="#FFB570" font-family="Helvetica" font-size="28px" text-anchor="middle" font-weight="bold">TCC</text></switch></g><path d="M 3768.75 1335 L 3768.8 1290 L 2592.5 1290 L 2592.5 1311.76" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2592.5 1317.76 L 2588.5 1309.76 L 2592.5 1311.76 L 2596.5 1309.76 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 3946.25 1465 L 3946.3 1532.5 L 3918.8 1532.5 L 3918.76 1588.03" fill="none" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3918.75 1595.53 L 3913.76 1585.52 L 3918.76 1588.03 L 3923.76 1585.53 Z" fill="#66cc00" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/><path d="M 4035 1400 L 4080 1400 L 4080 1972.5 L 4046.97 1972.5" fill="none" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4039.47 1972.5 L 4049.47 1967.5 L 4046.97 1972.5 L 4049.47 1977.5 Z" fill="#66cc00" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/><path d="M 4035 1367.5 L 4160 1367.5 L 4160 2265 L 2756.97 2265" fill="none" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2749.47 2265 L 2759.47 2260 L 2756.97 2265 L 2759.47 2270 Z" fill="#66cc00" stroke="#66cc00" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/><rect x="3680" y="1335" width="355" height="130" rx="15.6" ry="15.6" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 353px; height: 1px; padding-top: 1400px; margin-left: 3681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TM</div></div></div></foreignObject><text x="3858" y="1404" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TM</text></switch></g><ellipse cx="3384.5" cy="1258.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1259px; margin-left: 3367px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">1</font></div></div></div></foreignObject><text x="3385" y="1267" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">1</text></switch></g><ellipse cx="3458.5" cy="1338.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1339px; margin-left: 3441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">2</font></div></div></div></foreignObject><text x="3459" y="1347" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">2</text></switch></g><path d="M 3686.25 1600 L 3686.3 1570 L 2592.5 1570 L 2592.5 1596.76" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2592.5 1602.76 L 2588.5 1594.76 L 2592.5 1596.76 L 2596.5 1594.76 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="3570" y="1600" width="465" height="130" rx="7.8" ry="7.8" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 463px; height: 1px; padding-top: 1607px; margin-left: 3572px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="3572" y="1619" fill="#000000" font-family="Helvetica" font-size="12px">RM</text></switch></g><rect x="3560" y="1340" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 1350px; margin-left: 3561px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">返回xid</div></div></div></foreignObject><text x="3595" y="1355" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle" font-weight="bold">返回xid</text></switch></g><rect x="3545" y="1260" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 1270px; margin-left: 3546px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">开启全局事务</div></div></div></foreignObject><text x="3595" y="1275" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">开启全局事务</text></switch></g><rect x="3960" y="1506" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 1516px; margin-left: 3961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFB570; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffff00">RPC</font></div></div></div></foreignObject><text x="3980" y="1521" fill="#FFB570" font-family="Helvetica" font-size="15px" text-anchor="middle">RPC</text></switch></g><ellipse cx="3908.5" cy="1498.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1499px; margin-left: 3891px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">3</font></div></div></div></foreignObject><text x="3909" y="1507" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">3</text></switch></g><ellipse cx="3508.5" cy="1548.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1549px; margin-left: 3491px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">4</font></div></div></div></foreignObject><text x="3509" y="1557" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">4</text></switch></g><rect x="3610" y="1547" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 1557px; margin-left: 3611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister</div></div></div></foreignObject><text x="3630" y="1562" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">branc...</text></switch></g><ellipse cx="3288.5" cy="1631.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1632px; margin-left: 3271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">5</font></div></div></div></foreignObject><text x="3289" y="1640" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">5</text></switch></g><rect x="3325" y="1620" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1630px; margin-left: 3326px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">返回branchID</div></div></div></foreignObject><text x="3385" y="1635" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle" font-weight="bold">返回branchID</text></switch></g><path d="M 3765 1940 L 3765 1753.1 L 2753.24 1753.05" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2747.24 1753.05 L 2755.24 1749.05 L 2753.24 1753.05 L 2755.24 1757.05 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="4108.5" cy="1881.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1882px; margin-left: 4091px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">6</font></div></div></div></foreignObject><text x="4109" y="1890" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">6</text></switch></g><rect x="4025.5" y="1871.5" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 1882px; margin-left: 4027px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFB570; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffff00">RPC</font></div></div></div></foreignObject><text x="4046" y="1886" fill="#FFB570" font-family="Helvetica" font-size="15px" text-anchor="middle">RPC</text></switch></g><ellipse cx="3428.5" cy="1780" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1780px; margin-left: 3411px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">7</font></div></div></div></foreignObject><text x="3429" y="1788" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">7</text></switch></g><rect x="3505" y="1770" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 1780px; margin-left: 3506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchRegister</div></div></div></foreignObject><text x="3525" y="1785" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">branc...</text></switch></g><ellipse cx="3378.5" cy="1938.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1939px; margin-left: 3361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">8</font></div></div></div></foreignObject><text x="3379" y="1947" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">8</text></switch></g><rect x="3470" y="1937" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1947px; margin-left: 3471px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">返回branchID</div></div></div></foreignObject><text x="3530" y="1952" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle" font-weight="bold">返回branchID</text></switch></g><path d="M 3810 1695.75 L 3810 2166 L 2753.24 2166" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2747.24 2166 L 2755.24 2162 L 2753.24 2166 L 2755.24 2170 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="3770" y="1645.75" width="80" height="50" rx="7.5" ry="7.5" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1671px; margin-left: 3771px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">confirm</div></div></div></foreignObject><text x="3810" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">confirm</text></switch></g><rect x="3900" y="1645.75" width="80" height="50" rx="7.5" ry="7.5" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1671px; margin-left: 3901px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><span>cancel</span></div></div></div></div></foreignObject><text x="3940" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cancel</text></switch></g><rect x="3628" y="1645.75" width="86" height="48.5" rx="7.27" ry="7.27" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 84px; height: 1px; padding-top: 1670px; margin-left: 3629px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><span>try</span></div></div></div></div></foreignObject><text x="3671" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">try</text></switch></g><ellipse cx="4128.5" cy="2140" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2140px; margin-left: 4111px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">9</font></div></div></div></foreignObject><text x="4129" y="2148" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">9</text></switch></g><rect x="4058.5" y="2160" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 2170px; margin-left: 4060px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">提交全局事务</div></div></div></foreignObject><text x="4109" y="2175" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">提交全局事务</text></switch></g><path d="M 2745 2150 L 3780 2150 L 3780 1704.24" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3780 1698.24 L 3784 1706.24 L 3780 1704.24 L 3776 1706.24 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="3675" y="1940" width="360" height="130" rx="7.8" ry="7.8" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 358px; height: 1px; padding-top: 1947px; margin-left: 3677px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RM</div></div></div></foreignObject><text x="3677" y="1959" fill="#000000" font-family="Helvetica" font-size="12px">RM</text></switch></g><rect x="3714" y="1980.75" width="86" height="48.5" rx="7.27" ry="7.27" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 84px; height: 1px; padding-top: 2005px; margin-left: 3715px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><span>try</span></div></div></div></div></foreignObject><text x="3757" y="2009" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">try</text></switch></g><path d="M 2745 2200.02 L 3833 2200 L 3833.04 2037.24" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3833.04 2031.24 L 3837.04 2039.24 L 3833.04 2037.24 L 3829.04 2039.24 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="3820" y="1980" width="80" height="50" rx="7.5" ry="7.5" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 2005px; margin-left: 3821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">confirm</div></div></div></foreignObject><text x="3860" y="2009" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">confirm</text></switch></g><rect x="3920" y="1980" width="80" height="50" rx="7.5" ry="7.5" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 2005px; margin-left: 3921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><span>cancel</span></div></div></div></div></foreignObject><text x="3960" y="2009" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cancel</text></switch></g><ellipse cx="3426.5" cy="2121.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2122px; margin-left: 3409px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">10</font></div></div></div></foreignObject><text x="3427" y="2130" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">10</text></switch></g><rect x="3463.5" y="2111.5" width="133" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 131px; height: 1px; padding-top: 2122px; margin-left: 3465px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchCommit</div></div></div></foreignObject><text x="3530" y="2126" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">branchCommit</text></switch></g><ellipse cx="3831.5" cy="1801.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 1802px; margin-left: 3814px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">11</font></div></div></div></foreignObject><text x="3832" y="1810" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">11</text></switch></g><rect x="3800" y="1827" width="133" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 131px; height: 1px; padding-top: 1837px; margin-left: 3801px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchStatus</div></div></div></foreignObject><text x="3867" y="1842" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">branchStatus</text></switch></g><ellipse cx="3860" cy="2131.5" rx="18.5" ry="18.5" fill="#0000cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 35px; height: 1px; padding-top: 2132px; margin-left: 3843px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: #CC0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ffffff">12</font></div></div></div></foreignObject><text x="3860" y="2140" fill="#CC0000" font-family="Helvetica" font-size="27px" text-anchor="middle">12</text></switch></g><rect x="3873.5" y="2121.5" width="133" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 131px; height: 1px; padding-top: 2132px; margin-left: 3875px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">branchCommit</div></div></div></foreignObject><text x="3940" y="2136" fill="#FFFF00" font-family="Helvetica" font-size="15px" text-anchor="middle">branchCommit</text></switch></g><rect x="3000" y="2337" width="380" height="88.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 372px; height: 1px; padding-top: 2327px; margin-left: 3004px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 99px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font color="#ea6b66">Try阶段</font></h1><p style="text-align: left"><span style="line-height: 100%">try阶段方法一般是预留资源的，将要变更的数据提前保护起来，例如冻结金额，锁定库存等。</span></p></div></div></div></foreignObject><text x="3190" y="2339" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">Try阶段...</text></switch></g><rect x="3420" y="2337" width="380" height="88.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 372px; height: 1px; padding-top: 2327px; margin-left: 3424px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 99px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font color="#ea6b66">Confirm阶段</font></h1><div>该阶段一般是对预留资源的处理，正向提交业务逻辑，如将扣减冻结金额，扣减库存等。</div></div></div></div></foreignObject><text x="3610" y="2339" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">Confirm阶段...</text></switch></g><rect x="3830" y="2337" width="380" height="88.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 372px; height: 1px; padding-top: 2327px; margin-left: 3834px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 99px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font color="#ea6b66">Cancel阶段</font></h1><div>该阶段也是对预留资源的处理，反向提交业务逻辑，如将冻结金额恢复，库存恢复等。</div><div><br /></div></div></div></div></foreignObject><text x="4020" y="2339" fill="#FFFF00" font-family="Helvetica" font-size="12px" text-anchor="middle">Cancel阶段...</text></switch></g><rect x="3165.5" y="2530" width="860" height="280" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 852px; height: 1px; padding-top: 2520px; margin-left: 3171px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 290px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><h1>                     <font color="#ea6b66">注意事项</font></h1></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><div style="font-size: 13px"><ol><li>空回滚：在try还没执行完或者执行失败的情况下，执行了cancel方法，所以cancel方式需要识别出是否是空回归，如果是直接返回成功。</li><li>幂等：TC端可能会重复调用confirm和cancel。可以添加一个事务记录表，记录已经处理的事务。</li><li>悬挂：二阶段的cancel已经执行，try阶段才执行，那么资源就会一直被预留即为悬挂，为了解决这个问题，在二阶段处理时，如果是空回滚，那么就在事务记录表中加入一条状态为已回滚的记录，try阶段提交时发现是已经执行过cancel后就不再执行try。</li><li>在AT模式下，二阶段回滚的时候，如果beforeImage和afterImage相同、currentImage等于beforeImage、currentimage不等于afterImage都不回滚，只有在currentImage等于afterImage的时候才回滚。</li><li>默认情况下，如果GlobalCommit或GlobalRollback提交失败会一直重拾，可以设置maxCommitRetryTimeout和maxRollbackRetryTimeout，来管理重试多久后就不在重试，删除GlobalTransaction记录。</li></ol></div><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div style="font-size: 13px"><div>                                        <font style="font-size: 24px" color="#ea6b66"><b>可优化事项</b></font></div></div></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div style="font-size: 13px"><font style="font-size: 13px">由于try阶段已经预留资源，则其他操作不会对该资源进行处理，那么confirm和cancel的执行可以异步处理。提升业务的并发性。</font></div></blockquote><div><br /></div></div></div></div></foreignObject><text x="3171" y="2532" fill="#FFFF00" font-family="Helvetica" font-size="12px">注意事项...</text></switch></g><rect x="4127" y="1753" width="62.5" height="60" fill="none" stroke="none" pointer-events="all"/><path d="M 4152.25 1772.66 C 4154.36 1771.47 4156.45 1771.07 4158.53 1771.09 C 4166.9 1771.42 4171.02 1778.64 4170.35 1783.55 L 4162.27 1783.55 L 4172.03 1794.53 L 4181.79 1783.55 L 4175.25 1783.55 C 4175.53 1773.57 4167.49 1766.76 4158.77 1766.49 C 4155.64 1766.33 4151.98 1767.31 4148.98 1769.06 Z M 4134.68 1782.5 L 4141.19 1782.5 C 4141.28 1790.56 4146.17 1795.41 4150.83 1797.48 C 4156.73 1800.35 4162.99 1799.2 4167.47 1796.56 L 4164.17 1792.86 C 4162.94 1793.64 4161.3 1794.17 4159.19 1794.42 C 4151.14 1794.85 4145.92 1788.86 4145.99 1782.5 L 4154.09 1782.5 L 4144.37 1771.08 Z M 4158.33 1813 C 4140.65 1813 4127 1798.65 4127 1784.16 C 4127 1765.84 4141.03 1753 4158.55 1753 C 4176.93 1753 4189.5 1768.02 4189.5 1782.37 C 4189.5 1801.2 4174.1 1813 4158.33 1813 Z" fill="#ffff00" stroke="none" pointer-events="all"/><rect x="644.25" y="2006.5" width="181.5" height="70" rx="10.5" ry="10.5" fill="#cce5ff" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 180px; height: 1px; padding-top: 2014px; margin-left: 646px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果是二阶段提交，那么会插入带删除队列AsyncWorker，异步删除undolog</div></div></div></foreignObject><text x="646" y="2026" fill="#000000" font-family="Helvetica" font-size="12px">如果是二阶段提交，那么会插入带删除队列AsyncWorker，异步删除undolog</text></switch></g><rect x="2236" y="320" width="375" height="190" rx="5.7" ry="5.7" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 373px; height: 1px; padding-top: 327px; margin-left: 2237px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">processLocalCommitWithGlobalLocks<br />被@GlobalLock标记的方法且是对数据库的写操作<div><br /></div></div></div></div></foreignObject><text x="2424" y="339" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">processLocalCommitWithGlobalLocks...</text></switch></g><rect x="2296.62" y="380" width="253.75" height="90" rx="13.5" ry="13.5" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 425px; margin-left: 2298px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">checkLock<br />发送GlobalLockQueryRequest<br />请求，server端会根据lockKeys从lock_table表中查询记录，如果查询到，且xid不同，则证明已经被其他全局事务锁定，则当前本地事务就不能提交了</div></div></div></foreignObject><text x="2423" y="429" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">checkLock...</text></switch></g><rect x="2290" y="260" width="122" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 120px; height: 1px; padding-top: 275px; margin-left: 2291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">@GlobalLock</div></div></div></foreignObject><text x="2351" y="280" fill="#FFFF00" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">@GlobalLock</text></switch></g><rect x="1970" y="280" width="255.31" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 253px; height: 1px; padding-top: 295px; margin-left: 1971px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #FFFF00; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">@GlobalTransactional</div></div></div></foreignObject><text x="2098" y="300" fill="#FFFF00" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">@GlobalTransactional</text></switch></g><path d="M 2745 1781.25 L 3229.5 1781.3 L 3229.5 1992.9 L 3705.76 1992.88" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3711.76 1992.88 L 3703.76 1996.88 L 3705.76 1992.88 L 3703.76 1988.88 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 2745 1663.75 L 3619.76 1657.93" fill="none" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3625.76 1657.89 L 3617.79 1661.94 L 3619.76 1657.93 L 3617.74 1653.94 Z" fill="#66cc00" stroke="#66cc00" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="2350" y="630" width="340" height="305" rx="9.15" ry="9.15" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 637px; margin-left: 2351px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Transaction</div></div></div></foreignObject><text x="2520" y="649" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Transaction</text></switch></g><rect x="2360" y="665" width="320" height="260" rx="10.4" ry="10.4" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 672px; margin-left: 2361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">UndoLog 表中一条记录</div></div></div></foreignObject><text x="2520" y="684" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">UndoLog 表中一条记录</text></switch></g><rect x="2370" y="695" width="300" height="210" rx="16.8" ry="16.8" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 702px; margin-left: 2371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sqlUndoLogs 记录中一个属性</div></div></div></foreignObject><text x="2520" y="714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">sqlUndoLogs 记录中一个属性</text></switch></g><path d="M 2568 760 L 3063.63 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3068.88 760 L 3061.88 763.5 L 3063.63 760 L 3061.88 756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2388" y="725" width="180" height="70" rx="10.5" ry="10.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 178px; height: 1px; padding-top: 732px; margin-left: 2390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SqlUndoLog<br />type：语句类型如insert，update<br />beforeImage：执行前数据镜像<br />afterImage：执行后数据镜像</div></div></div></foreignObject><text x="2390" y="744" fill="#ffffff" font-family="Helvetica" font-size="12px">SqlUndoLog...</text></switch></g><rect x="2388" y="815" width="180" height="70" rx="10.5" ry="10.5" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 178px; height: 1px; padding-top: 822px; margin-left: 2390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SqlUndoLog<br />type：语句类型如delete<br />beforeImage：执行前数据镜像<br />afterImage：执行后数据镜像</div></div></div></foreignObject><text x="2390" y="834" fill="#ffffff" font-family="Helvetica" font-size="12px">SqlUndoLog...</text></switch></g><rect x="2200" y="675" width="137" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 135px; height: 1px; padding-top: 685px; margin-left: 2201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #EA6B66; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">undoLog内容解释</div></div></div></foreignObject><text x="2269" y="689" fill="#EA6B66" font-family="Helvetica" font-size="14px" text-anchor="middle">undoLog内容解释</text></switch></g><rect x="3070" y="708.75" width="260" height="102.5" rx="5.13" ry="5.13" fill="#6d8764" stroke="#3a5431" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 716px; margin-left: 3072px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">lock_table<br />row_key：resource_id^^^表名^^^数据主键<br />xid：全局事务id<br />branchId：分支事务id<br />table_name：表名<br />pk：数据主键</div></div></div></foreignObject><text x="3072" y="728" fill="#ffffff" font-family="Helvetica" font-size="12px">lock_table...</text></switch></g><rect x="2816" y="720" width="223" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 221px; height: 1px; padding-top: 745px; margin-left: 2817px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #EA6B66; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><font style="font-size: 15px" color="#001933">对应TC中lock_table的一条记录</font></div></div></div></foreignObject><text x="2928" y="750" fill="#EA6B66" font-family="Helvetica" font-size="15px" text-anchor="middle" font-weight="bold">对应TC中lock_table的一条记录</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>